(function($){if($.timepicker){return;}$.extend($.ui,{timepicker:{version:"0.9.6"}});function Timepicker(){this.regional=[];this.regional[""]={currentText:"Now",closeText:"Done",ampm:false,timeFormat:"hh:mm tt",timeSuffix:"",timeOnlyTitle:"Choose Time",timeText:"Time",hourText:"Hour",minuteText:"Minute",secondText:"Second",timezoneText:"Time Zone"};this._defaults={showButtonPanel:true,timeOnly:false,showHour:true,showMinute:true,showSecond:false,showTimezone:false,showTime:true,stepHour:0.05,stepMinute:0.05,stepSecond:0.05,hour:0,minute:0,second:0,timezone:"+0000",hourMin:0,minuteMin:0,secondMin:0,hourMax:23,minuteMax:59,secondMax:59,minDateTime:null,maxDateTime:null,hourGrid:0,minuteGrid:0,secondGrid:0,alwaysSetTime:true,separator:" ",altFieldTimeOnly:true,showTimepicker:true,timezoneList:["-1100","-1000","-0900","-0800","-0700","-0600","-0500","-0400","-0300","-0200","-0100","+0000","+0100","+0200","+0300","+0400","+0500","+0600","+0700","+0800","+0900","+1000","+1100","+1200"]};$.extend(this._defaults,this.regional[""]);}$.extend(Timepicker.prototype,{$input:null,$altInput:null,$timeObj:null,inst:null,hour_slider:null,minute_slider:null,second_slider:null,timezone_select:null,hour:0,minute:0,second:0,timezone:"+0000",hourMinOriginal:null,minuteMinOriginal:null,secondMinOriginal:null,hourMaxOriginal:null,minuteMaxOriginal:null,secondMaxOriginal:null,ampm:"",formattedDate:"",formattedTime:"",formattedDateTime:"",timezoneList:["-1100","-1000","-0900","-0800","-0700","-0600","-0500","-0400","-0300","-0200","-0100","+0000","+0100","+0200","+0300","+0400","+0500","+0600","+0700","+0800","+0900","+1000","+1100","+1200"],setDefaults:function(settings){extendRemove(this._defaults,settings||{});return this;},_newInst:function($input,o){var tp_inst=new Timepicker(),inlineSettings={};for(var attrName in this._defaults){var attrValue=$input.attr("time:"+attrName);if(attrValue){try{inlineSettings[attrName]=eval(attrValue);}catch(err){inlineSettings[attrName]=attrValue;}}}tp_inst._defaults=$.extend({},this._defaults,inlineSettings,o,{beforeShow:function(input,dp_inst){if($.isFunction(o.beforeShow)){o.beforeShow(input,dp_inst,tp_inst);}},onChangeMonthYear:function(year,month,dp_inst){tp_inst._updateDateTime(dp_inst);if($.isFunction(o.onChangeMonthYear)){o.onChangeMonthYear.call($input[0],year,month,dp_inst,tp_inst);}},onClose:function(dateText,dp_inst){if(tp_inst.timeDefined===true&&$input.val()!=""){tp_inst._updateDateTime(dp_inst);}if($.isFunction(o.onClose)){o.onClose.call($input[0],dateText,dp_inst,tp_inst);}},timepicker:tp_inst});tp_inst.hour=tp_inst._defaults.hour;tp_inst.minute=tp_inst._defaults.minute;tp_inst.second=tp_inst._defaults.second;tp_inst.ampm="";tp_inst.$input=$input;if(o.altField){tp_inst.$altInput=$(o.altField).css({cursor:"pointer"}).focus(function(){$input.trigger("focus");});}if(tp_inst._defaults.minDate!==undefined&&tp_inst._defaults.minDate instanceof Date){tp_inst._defaults.minDateTime=new Date(tp_inst._defaults.minDate.getTime());}if(tp_inst._defaults.minDateTime!==undefined&&tp_inst._defaults.minDateTime instanceof Date){tp_inst._defaults.minDate=new Date(tp_inst._defaults.minDateTime.getTime());}if(tp_inst._defaults.maxDate!==undefined&&tp_inst._defaults.maxDate instanceof Date){tp_inst._defaults.maxDateTime=new Date(tp_inst._defaults.maxDate.getTime());}if(tp_inst._defaults.maxDateTime!==undefined&&tp_inst._defaults.maxDateTime instanceof Date){tp_inst._defaults.maxDate=new Date(tp_inst._defaults.maxDateTime.getTime());}return tp_inst;},_addTimePicker:function(dp_inst){var currDT=(this.$altInput&&this._defaults.altFieldTimeOnly)?this.$input.val()+" "+this.$altInput.val():this.$input.val();this.timeDefined=this._parseTime(currDT);this._limitMinMaxDateTime(dp_inst,false);this._injectTimePicker();},_parseTime:function(timeString,withDate){var regstr=this._defaults.timeFormat.toString().replace(/h{1,2}/ig,"(\\d?\\d)").replace(/m{1,2}/ig,"(\\d?\\d)").replace(/s{1,2}/ig,"(\\d?\\d)").replace(/t{1,2}/ig,"(am|pm|a|p)?").replace(/z{1}/ig,"((\\+|-)\\d\\d\\d\\d)?").replace(/\s/g,"\\s?")+this._defaults.timeSuffix+"$",order=this._getFormatPositions(),treg;if(!this.inst){this.inst=$.datepicker._getInst(this.$input[0]);}if(withDate||!this._defaults.timeOnly){var dp_dateFormat=$.datepicker._get(this.inst,"dateFormat");var specials=new RegExp("[.*+?|()\\[\\]{}\\\\]","g");regstr=".{"+dp_dateFormat.length+",}"+this._defaults.separator.replace(specials,"\\$&")+regstr;}treg=timeString.match(new RegExp(regstr,"i"));if(treg){if(order.t!==-1){this.ampm=((treg[order.t]===undefined||treg[order.t].length===0)?"":(treg[order.t].charAt(0).toUpperCase()=="A")?"AM":"PM").toUpperCase();}if(order.h!==-1){if(this.ampm=="AM"&&treg[order.h]=="12"){this.hour=0;}else{if(this.ampm=="PM"&&treg[order.h]!="12"){this.hour=(parseFloat(treg[order.h])+12).toFixed(0);}else{this.hour=Number(treg[order.h]);}}}if(order.m!==-1){this.minute=Number(treg[order.m]);}if(order.s!==-1){this.second=Number(treg[order.s]);}if(order.z!==-1){this.timezone=treg[order.z];}return true;}return false;},_getFormatPositions:function(){var finds=this._defaults.timeFormat.toLowerCase().match(/(h{1,2}|m{1,2}|s{1,2}|t{1,2}|z)/g),orders={h:-1,m:-1,s:-1,t:-1,z:-1};if(finds){for(var i=0;i<finds.length;i++){if(orders[finds[i].toString().charAt(0)]==-1){orders[finds[i].toString().charAt(0)]=i+1;}}}return orders;},_injectTimePicker:function(){var $dp=this.inst.dpDiv,o=this._defaults,tp_inst=this,hourMax=(o.hourMax-(o.hourMax%o.stepHour)).toFixed(0),minMax=(o.minuteMax-(o.minuteMax%o.stepMinute)).toFixed(0),secMax=(o.secondMax-(o.secondMax%o.stepSecond)).toFixed(0),dp_id=this.inst.id.toString().replace(/([^A-Za-z0-9_])/g,"");if($dp.find("div#ui-timepicker-div-"+dp_id).length===0&&o.showTimepicker){var noDisplay=' style="display:none;"',html='<div class="ui-timepicker-div" id="ui-timepicker-div-'+dp_id+'"><dl><dt class="ui_tpicker_time_label" id="ui_tpicker_time_label_'+dp_id+'"'+((o.showTime)?"":noDisplay)+">"+o.timeText+'</dt><dd class="ui_tpicker_time" id="ui_tpicker_time_'+dp_id+'"'+((o.showTime)?"":noDisplay)+'></dd><dt class="ui_tpicker_hour_label" id="ui_tpicker_hour_label_'+dp_id+'"'+((o.showHour)?"":noDisplay)+">"+o.hourText+"</dt>",hourGridSize=0,minuteGridSize=0,secondGridSize=0,size;if(o.showHour&&o.hourGrid>0){html+='<dd class="ui_tpicker_hour"><div id="ui_tpicker_hour_'+dp_id+'"'+((o.showHour)?"":noDisplay)+'></div><div style="padding-left: 1px"><table class="ui-tpicker-grid-label"><tr>';for(var h=o.hourMin;h<=hourMax;h+=o.hourGrid){hourGridSize++;var tmph=(o.ampm&&h>12)?h-12:h;if(tmph<10){tmph="0"+tmph;}if(o.ampm){if(h==0){tmph=12+"a";}else{if(h<12){tmph+="a";}else{tmph+="p";}}}html+="<td>"+tmph+"</td>";}html+="</tr></table></div></dd>";}else{html+='<dd class="ui_tpicker_hour" id="ui_tpicker_hour_'+dp_id+'"'+((o.showHour)?"":noDisplay)+"></dd>";}html+='<dt class="ui_tpicker_minute_label" id="ui_tpicker_minute_label_'+dp_id+'"'+((o.showMinute)?"":noDisplay)+">"+o.minuteText+"</dt>";if(o.showMinute&&o.minuteGrid>0){html+='<dd class="ui_tpicker_minute ui_tpicker_minute_'+o.minuteGrid+'"><div id="ui_tpicker_minute_'+dp_id+'"'+((o.showMinute)?"":noDisplay)+'></div><div style="padding-left: 1px"><table class="ui-tpicker-grid-label"><tr>';for(var m=o.minuteMin;m<=minMax;m+=o.minuteGrid){minuteGridSize++;html+="<td>"+((m<10)?"0":"")+m+"</td>";}html+="</tr></table></div></dd>";}else{html+='<dd class="ui_tpicker_minute" id="ui_tpicker_minute_'+dp_id+'"'+((o.showMinute)?"":noDisplay)+"></dd>";}html+='<dt class="ui_tpicker_second_label" id="ui_tpicker_second_label_'+dp_id+'"'+((o.showSecond)?"":noDisplay)+">"+o.secondText+"</dt>";if(o.showSecond&&o.secondGrid>0){html+='<dd class="ui_tpicker_second ui_tpicker_second_'+o.secondGrid+'"><div id="ui_tpicker_second_'+dp_id+'"'+((o.showSecond)?"":noDisplay)+'></div><div style="padding-left: 1px"><table><tr>';for(var s=o.secondMin;s<=secMax;s+=o.secondGrid){secondGridSize++;html+="<td>"+((s<10)?"0":"")+s+"</td>";}html+="</tr></table></div></dd>";}else{html+='<dd class="ui_tpicker_second" id="ui_tpicker_second_'+dp_id+'"'+((o.showSecond)?"":noDisplay)+"></dd>";}html+='<dt class="ui_tpicker_timezone_label" id="ui_tpicker_timezone_label_'+dp_id+'"'+((o.showTimezone)?"":noDisplay)+">"+o.timezoneText+"</dt>";html+='<dd class="ui_tpicker_timezone" id="ui_tpicker_timezone_'+dp_id+'"'+((o.showTimezone)?"":noDisplay)+"></dd>";html+="</dl></div>";$tp=$(html);if(o.timeOnly===true){$tp.prepend('<div class="ui-widget-header ui-helper-clearfix ui-corner-all"><div class="ui-datepicker-title">'+o.timeOnlyTitle+"</div></div>");$dp.find(".ui-datepicker-header, .ui-datepicker-calendar").hide();}this.hour_slider=$tp.find("#ui_tpicker_hour_"+dp_id).slider({orientation:"horizontal",value:this.hour,min:o.hourMin,max:hourMax,step:o.stepHour,slide:function(event,ui){tp_inst.hour_slider.slider("option","value",ui.value);tp_inst._onTimeChange();}});this.minute_slider=$tp.find("#ui_tpicker_minute_"+dp_id).slider({orientation:"horizontal",value:this.minute,min:o.minuteMin,max:minMax,step:o.stepMinute,slide:function(event,ui){tp_inst.minute_slider.slider("option","value",ui.value);tp_inst._onTimeChange();}});this.second_slider=$tp.find("#ui_tpicker_second_"+dp_id).slider({orientation:"horizontal",value:this.second,min:o.secondMin,max:secMax,step:o.stepSecond,slide:function(event,ui){tp_inst.second_slider.slider("option","value",ui.value);tp_inst._onTimeChange();}});this.timezone_select=$tp.find("#ui_tpicker_timezone_"+dp_id).append("<select></select>").find("select");$.fn.append.apply(this.timezone_select,$.map(o.timezoneList,function(val,idx){return $("<option />").val(typeof val=="object"?val.value:val).text(typeof val=="object"?val.label:val);}));this.timezone_select.val((typeof this.timezone!="undefined"&&this.timezone!=null&&this.timezone!="")?this.timezone:o.timezone);this.timezone_select.change(function(){tp_inst._onTimeChange();});if(o.showHour&&o.hourGrid>0){size=100*hourGridSize*o.hourGrid/(hourMax-o.hourMin);$tp.find(".ui_tpicker_hour table").css({width:size+"%",marginLeft:(size/(-2*hourGridSize))+"%",borderCollapse:"collapse"}).find("td").each(function(index){$(this).click(function(){var h=$(this).html();if(o.ampm){var ap=h.substring(2).toLowerCase(),aph=parseInt(h.substring(0,2),10);if(ap=="a"){if(aph==12){h=0;}else{h=aph;}}else{if(aph==12){h=12;}else{h=aph+12;}}}tp_inst.hour_slider.slider("option","value",h);tp_inst._onTimeChange();tp_inst._onSelectHandler();}).css({cursor:"pointer",width:(100/hourGridSize)+"%",textAlign:"center",overflow:"hidden"});});}if(o.showMinute&&o.minuteGrid>0){size=100*minuteGridSize*o.minuteGrid/(minMax-o.minuteMin);$tp.find(".ui_tpicker_minute table").css({width:size+"%",marginLeft:(size/(-2*minuteGridSize))+"%",borderCollapse:"collapse"}).find("td").each(function(index){$(this).click(function(){tp_inst.minute_slider.slider("option","value",$(this).html());tp_inst._onTimeChange();tp_inst._onSelectHandler();}).css({cursor:"pointer",width:(100/minuteGridSize)+"%",textAlign:"center",overflow:"hidden"});});}if(o.showSecond&&o.secondGrid>0){$tp.find(".ui_tpicker_second table").css({width:size+"%",marginLeft:(size/(-2*secondGridSize))+"%",borderCollapse:"collapse"}).find("td").each(function(index){$(this).click(function(){tp_inst.second_slider.slider("option","value",$(this).html());tp_inst._onTimeChange();tp_inst._onSelectHandler();}).css({cursor:"pointer",width:(100/secondGridSize)+"%",textAlign:"center",overflow:"hidden"});});}var $buttonPanel=$dp.find(".ui-datepicker-buttonpane");if($buttonPanel.length){$buttonPanel.before($tp);}else{$dp.append($tp);}this.$timeObj=$tp.find("#ui_tpicker_time_"+dp_id);if(this.inst!==null){var timeDefined=this.timeDefined;this._onTimeChange();this.timeDefined=timeDefined;}var onSelectDelegate=function(){tp_inst._onSelectHandler();};this.hour_slider.bind("slidestop",onSelectDelegate);this.minute_slider.bind("slidestop",onSelectDelegate);this.second_slider.bind("slidestop",onSelectDelegate);}},_limitMinMaxDateTime:function(dp_inst,adjustSliders){var o=this._defaults,dp_date=new Date(dp_inst.selectedYear,dp_inst.selectedMonth,dp_inst.selectedDay);if(!this._defaults.showTimepicker){return;}if($.datepicker._get(dp_inst,"minDateTime")!==null&&dp_date){var minDateTime=$.datepicker._get(dp_inst,"minDateTime"),minDateTimeDate=new Date(minDateTime.getFullYear(),minDateTime.getMonth(),minDateTime.getDate(),0,0,0,0);if(this.hourMinOriginal===null||this.minuteMinOriginal===null||this.secondMinOriginal===null){this.hourMinOriginal=o.hourMin;this.minuteMinOriginal=o.minuteMin;this.secondMinOriginal=o.secondMin;}if(dp_inst.settings.timeOnly||minDateTimeDate.getTime()==dp_date.getTime()){this._defaults.hourMin=minDateTime.getHours();if(this.hour<=this._defaults.hourMin){this.hour=this._defaults.hourMin;this._defaults.minuteMin=minDateTime.getMinutes();if(this.minute<=this._defaults.minuteMin){this.minute=this._defaults.minuteMin;this._defaults.secondMin=minDateTime.getSeconds();}else{if(this.second<this._defaults.secondMin){this.second=this._defaults.secondMin;}this._defaults.secondMin=this.secondMinOriginal;}}else{this._defaults.minuteMin=this.minuteMinOriginal;this._defaults.secondMin=this.secondMinOriginal;}}else{this._defaults.hourMin=this.hourMinOriginal;this._defaults.minuteMin=this.minuteMinOriginal;this._defaults.secondMin=this.secondMinOriginal;}}if($.datepicker._get(dp_inst,"maxDateTime")!==null&&dp_date){var maxDateTime=$.datepicker._get(dp_inst,"maxDateTime"),maxDateTimeDate=new Date(maxDateTime.getFullYear(),maxDateTime.getMonth(),maxDateTime.getDate(),0,0,0,0);if(this.hourMaxOriginal===null||this.minuteMaxOriginal===null||this.secondMaxOriginal===null){this.hourMaxOriginal=o.hourMax;this.minuteMaxOriginal=o.minuteMax;this.secondMaxOriginal=o.secondMax;}if(dp_inst.settings.timeOnly||maxDateTimeDate.getTime()==dp_date.getTime()){this._defaults.hourMax=maxDateTime.getHours();if(this.hour>=this._defaults.hourMax){this.hour=this._defaults.hourMax;this._defaults.minuteMax=maxDateTime.getMinutes();if(this.minute>=this._defaults.minuteMax){this.minute=this._defaults.minuteMax;this._defaults.secondMax=maxDateTime.getSeconds();}else{if(this.second>this._defaults.secondMax){this.second=this._defaults.secondMax;}this._defaults.secondMax=this.secondMaxOriginal;}}else{this._defaults.minuteMax=this.minuteMaxOriginal;this._defaults.secondMax=this.secondMaxOriginal;}}else{this._defaults.hourMax=this.hourMaxOriginal;this._defaults.minuteMax=this.minuteMaxOriginal;this._defaults.secondMax=this.secondMaxOriginal;}}if(adjustSliders!==undefined&&adjustSliders===true){var hourMax=(this._defaults.hourMax-(this._defaults.hourMax%this._defaults.stepHour)).toFixed(0),minMax=(this._defaults.minuteMax-(this._defaults.minuteMax%this._defaults.stepMinute)).toFixed(0),secMax=(this._defaults.secondMax-(this._defaults.secondMax%this._defaults.stepSecond)).toFixed(0);if(this.hour_slider){this.hour_slider.slider("option",{min:this._defaults.hourMin,max:hourMax}).slider("value",this.hour);}if(this.minute_slider){this.minute_slider.slider("option",{min:this._defaults.minuteMin,max:minMax}).slider("value",this.minute);}if(this.second_slider){this.second_slider.slider("option",{min:this._defaults.secondMin,max:secMax}).slider("value",this.second);}}},_onTimeChange:function(){var hour=(this.hour_slider)?this.hour_slider.slider("value"):false,minute=(this.minute_slider)?this.minute_slider.slider("value"):false,second=(this.second_slider)?this.second_slider.slider("value"):false,timezone=(this.timezone_select)?this.timezone_select.val():false;if(typeof(hour)=="object"){hour=false;}if(typeof(minute)=="object"){minute=false;}if(typeof(second)=="object"){second=false;}if(typeof(timezone)=="object"){timezone=false;}if(hour!==false){hour=parseInt(hour,10);}if(minute!==false){minute=parseInt(minute,10);}if(second!==false){second=parseInt(second,10);}var ampm=(hour<12)?"AM":"PM";var hasChanged=(hour!=this.hour||minute!=this.minute||second!=this.second||(this.ampm.length>0&&this.ampm!=ampm)||timezone!=this.timezone);if(hasChanged){if(hour!==false){this.hour=hour;}if(minute!==false){this.minute=minute;}if(second!==false){this.second=second;}if(timezone!==false){this.timezone=timezone;}if(!this.inst){this.inst=$.datepicker._getInst(this.$input[0]);}this._limitMinMaxDateTime(this.inst,true);}if(this._defaults.ampm){this.ampm=ampm;}this._formatTime();if(this.$timeObj){this.$timeObj.text(this.formattedTime+this._defaults.timeSuffix);}this.timeDefined=true;if(hasChanged){this._updateDateTime();}},_onSelectHandler:function(){var onSelect=this._defaults.onSelect;var inputEl=this.$input?this.$input[0]:null;if(onSelect&&inputEl){onSelect.apply(inputEl,[this.formattedDateTime,this]);}},_formatTime:function(time,format,ampm){if(ampm==undefined){ampm=this._defaults.ampm;}time=time||{hour:this.hour,minute:this.minute,second:this.second,ampm:this.ampm,timezone:this.timezone};var tmptime=format||this._defaults.timeFormat.toString();if(ampm){var hour12=((time.ampm=="AM")?(time.hour):(time.hour%12));hour12=(Number(hour12)===0)?12:hour12;tmptime=tmptime.toString().replace(/hh/g,((hour12<10)?"0":"")+hour12).replace(/h/g,hour12).replace(/mm/g,((time.minute<10)?"0":"")+time.minute).replace(/m/g,time.minute).replace(/ss/g,((time.second<10)?"0":"")+time.second).replace(/s/g,time.second).replace(/TT/g,time.ampm.toUpperCase()).replace(/Tt/g,time.ampm.toUpperCase()).replace(/tT/g,time.ampm.toLowerCase()).replace(/tt/g,time.ampm.toLowerCase()).replace(/T/g,time.ampm.charAt(0).toUpperCase()).replace(/t/g,time.ampm.charAt(0).toLowerCase()).replace(/z/g,time.timezone);}else{tmptime=tmptime.toString().replace(/hh/g,((time.hour<10)?"0":"")+time.hour).replace(/h/g,time.hour).replace(/mm/g,((time.minute<10)?"0":"")+time.minute).replace(/m/g,time.minute).replace(/ss/g,((time.second<10)?"0":"")+time.second).replace(/s/g,time.second).replace(/z/g,time.timezone);tmptime=$.trim(tmptime.replace(/t/gi,""));}if(arguments.length){return tmptime;}else{this.formattedTime=tmptime;}},_updateDateTime:function(dp_inst){dp_inst=this.inst||dp_inst,dt=new Date(dp_inst.selectedYear,dp_inst.selectedMonth,dp_inst.selectedDay),dateFmt=$.datepicker._get(dp_inst,"dateFormat"),formatCfg=$.datepicker._getFormatConfig(dp_inst),timeAvailable=dt!==null&&this.timeDefined;this.formattedDate=$.datepicker.formatDate(dateFmt,(dt===null?new Date():dt),formatCfg);var formattedDateTime=this.formattedDate;if(dp_inst.lastVal!==undefined&&(dp_inst.lastVal.length>0&&this.$input.val().length===0)){return;}if(this._defaults.timeOnly===true){formattedDateTime=this.formattedTime;}else{if(this._defaults.timeOnly!==true&&(this._defaults.alwaysSetTime||timeAvailable)){formattedDateTime+=this._defaults.separator+this.formattedTime+this._defaults.timeSuffix;}}this.formattedDateTime=formattedDateTime;if(!this._defaults.showTimepicker){this.$input.val(this.formattedDate);}else{if(this.$altInput&&this._defaults.altFieldTimeOnly===true){this.$altInput.val(this.formattedTime);this.$input.val(this.formattedDate);}else{if(this.$altInput){this.$altInput.val(formattedDateTime);this.$input.val(formattedDateTime);}else{this.$input.val(formattedDateTime);}}}this.$input.trigger("change");}});$.fn.extend({timepicker:function(o){o=o||{};var tmp_args=arguments;if(typeof o=="object"){tmp_args[0]=$.extend(o,{timeOnly:true});}return $(this).each(function(){$.fn.datetimepicker.apply($(this),tmp_args);});},datetimepicker:function(o){o=o||{};var $input=this,tmp_args=arguments;if(typeof(o)=="string"){if(o=="getDate"){return $.fn.datepicker.apply($(this[0]),tmp_args);}else{return this.each(function(){var $t=$(this);$t.datepicker.apply($t,tmp_args);});}}else{return this.each(function(){var $t=$(this);$t.datepicker($.timepicker._newInst($t,o)._defaults);});}}});$.datepicker._base_selectDate=$.datepicker._selectDate;$.datepicker._selectDate=function(id,dateStr){var inst=this._getInst($(id)[0]),tp_inst=this._get(inst,"timepicker");if(tp_inst){tp_inst._limitMinMaxDateTime(inst,true);inst.inline=inst.stay_open=true;this._base_selectDate(id,dateStr+tp_inst._defaults.separator+tp_inst.formattedTime+tp_inst._defaults.timeSuffix);inst.inline=inst.stay_open=false;this._notifyChange(inst);this._updateDatepicker(inst);}else{this._base_selectDate(id,dateStr);}};$.datepicker._base_updateDatepicker=$.datepicker._updateDatepicker;$.datepicker._updateDatepicker=function(inst){var input=inst.input[0];if($.datepicker._curInst&&$.datepicker._curInst!=inst&&$.datepicker._datepickerShowing&&$.datepicker._lastInput!=input){return;}if(typeof(inst.stay_open)!=="boolean"||inst.stay_open===false){this._base_updateDatepicker(inst);var tp_inst=this._get(inst,"timepicker");if(tp_inst){tp_inst._addTimePicker(inst);}}};$.datepicker._base_doKeyPress=$.datepicker._doKeyPress;$.datepicker._doKeyPress=function(event){var inst=$.datepicker._getInst(event.target),tp_inst=$.datepicker._get(inst,"timepicker");if(tp_inst){if($.datepicker._get(inst,"constrainInput")){var ampm=tp_inst._defaults.ampm,dateChars=$.datepicker._possibleChars($.datepicker._get(inst,"dateFormat")),datetimeChars=tp_inst._defaults.timeFormat.toString().replace(/[hms]/g,"").replace(/TT/g,ampm?"APM":"").replace(/Tt/g,ampm?"AaPpMm":"").replace(/tT/g,ampm?"AaPpMm":"").replace(/T/g,ampm?"AP":"").replace(/tt/g,ampm?"apm":"").replace(/t/g,ampm?"ap":"")+" "+tp_inst._defaults.separator+tp_inst._defaults.timeSuffix+(tp_inst._defaults.showTimezone?tp_inst._defaults.timezoneList.join(""):"")+dateChars,chr=String.fromCharCode(event.charCode===undefined?event.keyCode:event.charCode);return event.ctrlKey||(chr<" "||!dateChars||datetimeChars.indexOf(chr)>-1);}}return $.datepicker._base_doKeyPress(event);};$.datepicker._base_doKeyUp=$.datepicker._doKeyUp;$.datepicker._doKeyUp=function(event){var inst=$.datepicker._getInst(event.target),tp_inst=$.datepicker._get(inst,"timepicker");if(tp_inst){if(tp_inst._defaults.timeOnly&&(inst.input.val()!=inst.lastVal)){try{$.datepicker._updateDatepicker(inst);}catch(err){$.datepicker.log(err);}}}return $.datepicker._base_doKeyUp(event);};$.datepicker._base_gotoToday=$.datepicker._gotoToday;$.datepicker._gotoToday=function(id){this._base_gotoToday(id);this._setTime(this._getInst($(id)[0]),new Date());};$.datepicker._disableTimepickerDatepicker=function(target,date,withDate){var inst=this._getInst(target),tp_inst=this._get(inst,"timepicker");$(target).datepicker("getDate");if(tp_inst){tp_inst._defaults.showTimepicker=false;tp_inst._updateDateTime(inst);}};$.datepicker._enableTimepickerDatepicker=function(target,date,withDate){var inst=this._getInst(target),tp_inst=this._get(inst,"timepicker");$(target).datepicker("getDate");if(tp_inst){tp_inst._defaults.showTimepicker=true;tp_inst._addTimePicker(inst);tp_inst._updateDateTime(inst);}};$.datepicker._setTime=function(inst,date){var tp_inst=this._get(inst,"timepicker");if(tp_inst){var defaults=tp_inst._defaults,hour=date?date.getHours():defaults.hour,minute=date?date.getMinutes():defaults.minute,second=date?date.getSeconds():defaults.second;if((hour<defaults.hourMin||hour>defaults.hourMax)||(minute<defaults.minuteMin||minute>defaults.minuteMax)||(second<defaults.secondMin||second>defaults.secondMax)){hour=defaults.hourMin;minute=defaults.minuteMin;second=defaults.secondMin;}tp_inst.hour=hour;tp_inst.minute=minute;tp_inst.second=second;if(tp_inst.hour_slider){tp_inst.hour_slider.slider("value",hour);}if(tp_inst.minute_slider){tp_inst.minute_slider.slider("value",minute);}if(tp_inst.second_slider){tp_inst.second_slider.slider("value",second);}tp_inst._onTimeChange();tp_inst._updateDateTime(inst);}};$.datepicker._setTimeDatepicker=function(target,date,withDate){var inst=this._getInst(target),tp_inst=this._get(inst,"timepicker");if(tp_inst){this._setDateFromField(inst);var tp_date;if(date){if(typeof date=="string"){tp_inst._parseTime(date,withDate);tp_date=new Date();tp_date.setHours(tp_inst.hour,tp_inst.minute,tp_inst.second);}else{tp_date=new Date(date.getTime());}if(tp_date.toString()=="Invalid Date"){tp_date=undefined;}this._setTime(inst,tp_date);}}};$.datepicker._base_setDateDatepicker=$.datepicker._setDateDatepicker;$.datepicker._setDateDatepicker=function(target,date){var inst=this._getInst(target),tp_date=(date instanceof Date)?new Date(date.getTime()):date;this._updateDatepicker(inst);this._base_setDateDatepicker.apply(this,arguments);this._setTimeDatepicker(target,tp_date,true);};$.datepicker._base_getDateDatepicker=$.datepicker._getDateDatepicker;$.datepicker._getDateDatepicker=function(target,noDefault){var inst=this._getInst(target),tp_inst=this._get(inst,"timepicker");if(tp_inst){this._setDateFromField(inst,noDefault);var date=this._getDate(inst);if(date&&tp_inst._parseTime($(target).val(),tp_inst.timeOnly)){date.setHours(tp_inst.hour,tp_inst.minute,tp_inst.second);}return date;}return this._base_getDateDatepicker(target,noDefault);};$.datepicker._base_parseDate=$.datepicker.parseDate;$.datepicker.parseDate=function(format,value,settings){var date;try{date=this._base_parseDate(format,value,settings);}catch(err){date=this._base_parseDate(format,value.substring(0,value.length-(err.length-err.indexOf(":")-2)),settings);}return date;};$.datepicker._base_optionDatepicker=$.datepicker._optionDatepicker;$.datepicker._optionDatepicker=function(target,name,value){this._base_optionDatepicker(target,name,value);var inst=this._getInst(target),tp_inst=this._get(inst,"timepicker");if(tp_inst){if(name==="minDate"){if(tp_inst._defaults.minDate!==undefined&&tp_inst._defaults.minDate instanceof Date){tp_inst._defaults.minDateTime=new Date(value);}if(tp_inst._defaults.minDateTime!==undefined&&tp_inst._defaults.minDateTime instanceof Date){tp_inst._defaults.minDate=new Date(tp_inst._defaults.minDateTime.getTime());}tp_inst._limitMinMaxDateTime(inst,true);}if(name==="maxDate"){if(tp_inst._defaults.maxDate!==undefined&&tp_inst._defaults.maxDate instanceof Date){tp_inst._defaults.maxDateTime=new Date(value);}if(tp_inst._defaults.maxDateTime!==undefined&&tp_inst._defaults.maxDateTime instanceof Date){tp_inst._defaults.maxDate=new Date(tp_inst._defaults.maxDateTime.getTime());}tp_inst._limitMinMaxDateTime(inst,true);}}};function extendRemove(target,props){$.extend(target,props);for(var name in props){if(props[name]===null||props[name]===undefined){target[name]=props[name];}}return target;}$.timepicker=new Timepicker();$.timepicker.version="0.9.6";})(ice.ace.jq);(function(a){ice.ace.Calendar=function(e,b){var c;this.id=e;this.cfg=b;this.jqId=ice.ace.escapeClientId(e);this.jqElId=this.cfg.popup?this.jqId+"_input":this.jqId+"_inline";this.jq=a(this.jqElId);this.cfg.formId=this.jq.parents("form:first").attr("id");this.configureLocale();if(this.cfg.pattern){this.cfg.dateFormat=this.cfg.pattern;}this.bindDateSelectListener();if(!this.cfg.popup){this.cfg.altField=a(this.jqId+"_input");}var d=this.hasTimePicker();if(d){this.configureTimePicker();}if(!this.cfg.disabled){if(d){if(this.cfg.timeOnly){this.jq.timepicker(this.cfg);}else{this.jq.datetimepicker(this.cfg);}}else{this.jq.datepicker(this.cfg);}}if(this.cfg.popup){if(this.cfg.behaviors){ice.ace.attachBehaviors(this.jq,this.cfg.behaviors);}if(this.cfg.popup&&this.cfg.theme!=false){ice.ace.skinInput(this.jq);}c=this.cfg&&this.cfg.behaviors&&this.cfg.behaviors.dateTextChange;if(c){this.jq.change(function(){c();});}}};ice.ace.Calendar.prototype.configureLocale=function(){var b=ice.ace.locales[this.cfg.locale];if(b){for(var c in b){this.cfg[c]=b[c];}}};ice.ace.Calendar.prototype.bindDateSelectListener=function(){var b=this;if(this.cfg.behaviors){this.cfg.onSelect=function(d,c){var e=b.cfg.behaviors.dateSelect;if(e){e.call(b);}};}};ice.ace.Calendar.prototype.configureTimePicker=function(){var c=this.cfg.dateFormat,b=c.indexOf("h");this.cfg.dateFormat=c.substring(0,b-1);this.cfg.timeFormat=c.substring(b,c.length);if(this.cfg.timeFormat.indexOf("ss")!=-1){this.cfg.showSecond=true;}if(this.cfg.timeFormat.indexOf("TT")!=-1){this.cfg.ampm=true;}};ice.ace.Calendar.prototype.hasTimePicker=function(){return this.cfg.dateFormat.indexOf("h")!=-1;};ice.ace.Calendar.prototype.setDate=function(b){this.jq.datetimepicker("setDate",b);};ice.ace.Calendar.prototype.getDate=function(){return this.jq.datetimepicker("getDate");};ice.ace.Calendar.prototype.enable=function(){this.jq.datetimepicker("enable");};ice.ace.Calendar.prototype.disable=function(){this.jq.datetimepicker("disable");};}(ice.ace.jq));(function(c){var a=(c.browser.msie?"paste":"input")+".mask";var b=(window.orientation!=undefined);c.mask={definitions:{"9":"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"}};c.fn.extend({caret:function(f,d){if(this.length==0){return;}if(typeof f=="number"){d=(typeof d=="number")?d:f;return this.each(function(){if(this.setSelectionRange){this.focus();this.setSelectionRange(f,d);}else{if(this.createTextRange){var g=this.createTextRange();g.collapse(true);g.moveEnd("character",d);g.moveStart("character",f);g.select();}}});}else{if(this[0].setSelectionRange){f=this[0].selectionStart;d=this[0].selectionEnd;}else{if(document.selection&&document.selection.createRange){var e=document.selection.createRange();f=0-e.duplicate().moveStart("character",-100000);d=f+e.text.length;}}return{begin:f,end:d};}},unmask:function(){return this.trigger("unmask");},mask:function(f,k){if(!f&&this.length>0){var g=c(this[0]);var j=g.data("tests");return c.map(g.data("buffer"),function(n,m){return j[m]?n:null;}).join("");}k=c.extend({placeholder:"_",completed:null},k);var e=c.mask.definitions;var j=[];var l=f.length;var h=null;var d=f.length;c.each(f.split(""),function(m,n){if(n=="?"){d--;l=m;}else{if(e[n]){j.push(new RegExp(e[n]));if(h==null){h=j.length-1;}}else{j.push(null);}}});return this.each(function(){var v=c(this);var q=c.map(f.split(""),function(z,y){if(z!="?"){return e[z]?k.placeholder:z;}});var t=false;var x=v.val();v.data("buffer",q).data("tests",j);function u(y){while(++y<=d&&!j[y]){}return y;}function p(A){while(!j[A]&&--A>=0){}for(var z=A;z<d;z++){if(j[z]){q[z]=k.placeholder;var y=u(z);if(y<d&&j[z].test(q[y])){q[z]=q[y];}else{break;}}}s();v.caret(Math.max(h,A));}function m(C){for(var A=C,B=k.placeholder;A<d;A++){if(j[A]){var y=u(A);var z=q[A];q[A]=B;if(y<d&&j[y].test(z)){B=z;}else{break;}}}}function r(z){var A=c(this).caret();var y=z.keyCode;t=(y<16||(y>16&&y<32)||(y>32&&y<41));if((A.begin-A.end)!=0&&(!t||y==8||y==46)){n(A.begin,A.end);}if(y==8||y==46||(b&&y==127)){p(A.begin+(y==46?0:-1));return false;}else{if(y==27){v.val(x);v.caret(0,o());return false;}}}function w(B){if(t){t=false;return(B.keyCode==8)?false:null;}B=B||window.event;var y=B.charCode||B.keyCode||B.which;var D=c(this).caret();if(B.ctrlKey||B.altKey||B.metaKey){return true;}else{if((y>=32&&y<=125)||y>186){var A=u(D.begin-1);if(A<d){var C=String.fromCharCode(y);if(j[A].test(C)){m(A);q[A]=C;s();var z=u(A);c(this).caret(z);if(k.completed&&z==d){k.completed.call(v);}}}}}return false;}function n(A,y){for(var z=A;z<y&&z<d;z++){if(j[z]){q[z]=k.placeholder;}}}function s(){return v.val(q.join("")).val();}function o(z){var D=v.val();var C=-1;for(var y=0,B=0;y<d;y++){if(j[y]){q[y]=k.placeholder;while(B++<D.length){var A=D.charAt(B-1);if(j[y].test(A)){q[y]=A;C=y;break;}}if(B>D.length){break;}}else{if(q[y]==D[B]&&y!=l){B++;C=y;}}}if(!z&&C+1<l){v.val("");n(0,d);}else{if(z||C+1>=l){s();if(!z){v.val(v.val().substring(0,C+1));}}}return(l?y:h);}if(!v.attr("readonly")){v.one("unmask",function(){v.unbind(".mask").removeData("buffer").removeData("tests");}).bind("focus.mask",function(){x=v.val();var y=o();s();setTimeout(function(){if(y==f.length){v.caret(0,y);}else{v.caret(y);}},0);}).bind("blur.mask",function(){o();if(v.val()!=x){v.change();}}).bind("keydown.mask",r).bind("keypress.mask",w).bind(a,function(){setTimeout(function(){v.caret(o(true));},0);});}o();});}});})(ice.ace.jq);ice.ace.InputMask=function(b,a){this.id=b;this.cfg=a;this.jqId=ice.ace.escapeClientId(b);this.jq=ice.ace.jq(this.jqId);if(this.cfg.mask){this.jq.mask(this.cfg.mask,this.cfg);}this.jq.change(function(){setFocus("");});if(this.cfg.behaviors){ice.ace.attachBehaviors(this.jq,this.cfg.behaviors);}if(this.cfg.theme!=false){ice.ace.skinInput(this.jq);}};if(!window.ice.ace){window.ice.ace={};}ice.ace.Dialog=function(a,e){var g=arguments.callee,b=g[a],h;if(b){h=b.jq;if(h.dialog("isOpen")){h.dialog("close",{type:"close",synthetic:true});}}e.width=e.width||"auto";e.height=e.height||"auto";this.id=a;this.cfg=e;this.jqId=ice.ace.escapeClientId(a);this.jq=ice.ace.jq(this.jqId);var f=this,j=this.cfg.closable;if(j==false){this.cfg.closeOnEscape=false;}if(this.cfg.hide=="pulsate"){this.cfg.hide=null;}else{var c=ice.ace.Dialog.browser();if(c=="ie7"||c=="ie8"){var d=this.cfg.hide;if(d){if(d=="highlight"||d=="bounce"){this.cfg.hide=null;}}}}this.jq.find("script").remove();this.cfg.autoOpen=false;this.jq.dialog(this.cfg);this.jq.bind("dialogclose",function(k,l){f.onHide(k,l);});this.jq.bind("dialogopen",function(k,l){f.onShow(k,l);});if(j==false){this.jq.parent().find(".ui-dialog-titlebar-close").hide();}if(this.cfg.showHeader==false){this.jq.parent().children(".ui-dialog-titlebar").hide();}if(this.cfg.isVisible){this.jq.dialog("open");this.focusFirstInput();}g[a]=this;};ice.ace.Dialog.prototype.show=function(){this.jq.dialog("open");this.focusFirstInput();};ice.ace.Dialog.prototype.hide=function(){this.jq.dialog("close");};ice.ace.Dialog.prototype.onShow=function(a,b){if(this.cfg.onShow){this.cfg.onShow.call(this,a,b);}};ice.ace.Dialog.prototype.onHide=function(b,c){if(typeof b.originalEvent!="undefined"){if(b.originalEvent.synthetic){return;}}else{if(b.synthetic){return;}}if(this.cfg.onHide){this.cfg.onHide.call(this,b,c);}if(this.cfg.behaviors){var a=this.cfg.behaviors.close;if(a){a.call(this);}}};ice.ace.Dialog.prototype.focusFirstInput=function(){this.jq.find(":not(:submit):not(:button):input:visible:enabled:first").focus();};ice.ace.Dialog.browser=function(){if(ice.ace.jq.browser.msie){if(ice.ace.jq.browser.version<8){if(navigator.userAgent.indexOf("Trident/5")<0){return"ie7";}}else{if(ice.ace.jq.browser.version<9){return"ie8";}}}return"";};ice.ace.Draggable=function(b,a){this.id=b;this.cfg=a;ice.ace.jq(ice.ace.escapeClientId(this.cfg.target)).draggable(this.cfg);};ice.ace.Droppable=function(b,a){this.id=b;this.cfg=a;this.setupDropHandler();ice.ace.jq(ice.ace.escapeClientId(this.cfg.target)).droppable(this.cfg);};ice.ace.Droppable.prototype.setupDropHandler=function(){this.cfg.formId=ice.ace.jq(ice.ace.escapeClientId(this.id)).parents("form:first").attr("id");var a=this;this.cfg.drop=function(c,d){var f=a.cfg&&a.cfg.behaviors&&a.cfg.behaviors.drop;var b={source:a.id,execute:a.id,render:"@none",formId:a.cfg.formId};var e={};e[a.id+"_dragId"]=d.draggable.attr("id");e[a.id+"_dropId"]=a.cfg.target;b.params=e;if(ice.ace.jq.isFunction(f)){b.params[a.id]=a.id;f(b.params);}else{ice.ace.AjaxRequest(b);}};};ice.ace.ProgressBar=function(b,a){this.id=b;this.cfg=a;this.jqId=ice.ace.escapeClientId(b);if(this.cfg.usePolling){this.cfg.formId=ice.ace.jq(this.jqId).parents("form:first").attr("id");}this.qObj=ice.ace.jq(this.jqId);this.qObj.progressbar(this.cfg);this.qObj.bind("progressbarchange",this,this.changeListener);};ice.ace.ProgressBar.prototype.setValue=function(a){ice.ace.jq(this.jqId).progressbar("value",a);};ice.ace.ProgressBar.prototype.getValue=function(){return ice.ace.jq(this.jqId).progressbar("value");};ice.ace.ProgressBar.prototype.start=function(){var a=this;if(this.cfg.usePolling){this.progressPoll=setInterval(function(){var b={source:a.id,execute:a.id,render:"@none",formId:a.cfg.formId,async:true,oncomplete:function(f,c,d){var e=d[a.id+"_value"];a.setValue(e);if(e===100){a.fireCompleteEvent();}}};ice.ace.AjaxRequest(b);},this.cfg.pollingInterval);}};ice.ace.ProgressBar.prototype.fireCompleteEvent=function(){var b=this.cfg&&this.cfg.behaviors&&this.cfg.behaviors.complete;clearInterval(this.progressPoll);var a={source:this.id,execute:this.id,render:"@none",formId:this.cfg.formId,async:true};var c={};c[this.id+"_complete"]=true;a.params=c;if(ice.ace.jq.isFunction(b)){a.params[this.id]=this.id;b(a.params);}else{ice.ace.AjaxRequest(a);}};ice.ace.ProgressBar.prototype.changeListener=function(d,f){var e=d.data,h=e.id;var b=e.cfg;var a=b&&b.behaviors&&b.behaviors.change;var c={source:h,execute:h,render:"@none",formId:b.formId,async:true};var g={};g[h+"_change"]=true;g[h+"_value"]=f.value;g[h+"_percentage"]=f.percentage;c.params=g;if(ice.ace.jq.isFunction(a)){c.params[this.id]=this.id;a(c.params);}else{ice.ace.AjaxRequest(c);}};ice.ace.ProgressBar.prototype.cancel=function(){var c=this.cfg&&this.cfg.behaviors&&this.cfg.behaviors.cancel;clearInterval(this.progressPoll);var a=this;var b={source:this.id,execute:this.id,render:"@none",formId:this.cfg.formId,async:true,oncomplete:function(g,e,f){a.setValue(0);}};var d={};d[this.id+"_cancel"]=true;b.params=d;if(ice.ace.jq.isFunction(c)){b.params[this.id]=this.id;c(b.params);this.setValue(0);}else{ice.ace.AjaxRequest(b);}};ice.ace.Resizable=function(d,b){var c=b&&b.behaviors&&b.behaviors.resize;this.id=d;this.cfg=b;this.target=ice.ace.escapeClientId(this.cfg.target);if(ice.ace.jq.isFunction(c)){this.cfg.ajaxResize=true;}if(this.cfg.ajaxResize){this.cfg.formId=ice.ace.jq(this.target).parents("form:first").attr("id");}var a=this;this.cfg.stop=function(e,f){if(a.cfg.ajaxResize){a.fireAjaxResizeEvent(e,f);}};ice.ace.jq(this.target).resizable(this.cfg);};ice.ace.Resizable.prototype.fireAjaxResizeEvent=function(b,d){var c=this.cfg&&this.cfg.behaviors&&this.cfg.behaviors.resize;var a={source:this.id,execute:this.id,render:"@none",formId:this.cfg.formId};var e={};e[this.id+"_ajaxResize"]=true;e[this.id+"_width"]=d.helper.width();e[this.id+"_height"]=d.helper.height();a.params=e;if(ice.ace.jq.isFunction(c)){c(a.params);}else{ice.ace.AjaxRequest(a);}};ice.ace.Slider=function(e,b){this.id=e;this.cfg=b;this.jq=ice.ace.jq(ice.ace.escapeClientId(this.id));this.input=ice.ace.jq(ice.ace.escapeClientId(this.cfg.input));if(this.cfg.output){this.output=ice.ace.jq(ice.ace.escapeClientId(this.cfg.output));}var a=this;if(this.cfg.clickableRail==false){this.jq.mousedown(function(f){if(f.target==this){f.stopImmediatePropagation();}}).slider(this.cfg);}else{this.jq.slider(this.cfg);}var c=ice.ace.jq(ice.ace.escapeClientId(this.id)+" > a");if(this.cfg.tabindex){c.attr("tabindex",this.cfg.tabindex);}this.jq.bind("slide",function(f,g){a.onSlide(f,g);});if(this.cfg.onSlideStart){this.jq.bind("slidestart",function(f,g){a.cfg.onSlideStart.call(this,f,g);});}if(this.cfg.behaviors){if(this.cfg.behaviors.slideStart){this.jq.bind("slidestart",function(f,g){a.cfg.behaviors.slideStart();});}}this.jq.bind("slidestop",function(f,g){a.onSlideEnd(f,g);});var d=this.jq;if(this.cfg.disabled){window.setTimeout(function(){d.slider("disable");},1);}else{window.setTimeout(function(){d.slider("enable");},1);}};ice.ace.Slider.prototype.onSlide=function(a,b){if(this.cfg.onSlide){this.cfg.onSlide.call(this,a,b);}this.input.val(b.value);if(this.output){this.output.html(b.value);}if(this.cfg.behaviors){if(this.cfg.behaviors.slide){this.cfg.behaviors.slide();}}};ice.ace.Slider.prototype.onSlideEnd=function(a,b){if(this.cfg.onSlideEnd){this.cfg.onSlideEnd.call(this,a,b);}if(this.cfg.behaviors){if(this.cfg.behaviors.slideEnd){this.cfg.behaviors.slideEnd();}}};ice.ace.Slider.prototype.getValue=function(){return this.jq.slider("value");};ice.ace.Slider.prototype.setValue=function(a){this.jq.slider("value",a);};ice.ace.Slider.prototype.enable=function(){this.jq.slider("enable");};ice.ace.Slider.prototype.disable=function(){this.jq.slider("disable");};ice.ace.ConfirmDialog=function(f,b){this.id=f;this.cfg=b;this.jqId=ice.ace.escapeClientId(f);this.jq=ice.ace.jq(this.jqId);this.cfg.resizable=false;this.cfg.autoOpen=false;if(this.cfg.hide=="pulsate"){this.cfg.hide=null;}var c=ice.ace.ConfirmDialog.browser();if(c=="ie7"||c=="ie8"){var d=this.cfg.hide;if(d){if(d=="highlight"||d=="bounce"){this.cfg.hide=null;}if(c=="ie7"){if(d=="puff"){this.cfg.hide=null;}}}var a=this.cfg.show;if(a&&c=="ie7"){if(a=="puff"||a=="scale"){this.cfg.show=null;}}}this.jq.find("script").remove();this.jq.dialog(this.cfg);var e=ice.ace.jq(this.jqId+"_buttons");e.addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix");if(this.cfg.closable==false){ice.ace.jq(this.jqId).parent().find(".ui-dialog-titlebar-close").hide();}};ice.ace.ConfirmDialog.prototype.show=function(){this.jq.dialog("open");};ice.ace.ConfirmDialog.prototype.hide=function(){this.jq.dialog("close");};ice.ace.ConfirmDialog.browser=function(){if(ice.ace.jq.browser.msie){if(ice.ace.jq.browser.version<8){if(navigator.userAgent.indexOf("Trident/5")<0){return"ie7";}}else{if(ice.ace.jq.browser.version<9){return"ie8";}}}return"";};ice.ace.Panel=function(b,a){this.id=b;this.cfg=a;this.jqId=ice.ace.escapeClientId(b);if(this.cfg.toggleable){this.toggler=ice.ace.jq(this.jqId+"_toggler");this.toggleStateHolder=ice.ace.jq(this.jqId+"_collapsed");this.content=ice.ace.jq(this.jqId+"_content");this.setupToggleTrigger();}if(this.cfg.closable){this.visibleStateHolder=ice.ace.jq(this.jqId+"_visible");this.setupCloseTrigger();}if(this.cfg.hasMenu){this.visibleStateHolder=ice.ace.jq(this.jqId+"_visible");this.setupMenuTrigger();}if(!this.cfg.visible){ice.ace.jq(this.jqId).css("display","none");}};ice.ace.Panel.prototype.toggle=function(){if(this.cfg.collapsed){this.toggler.removeClass("ui-icon-plusthick").addClass("ui-icon-minusthick");this.cfg.collapsed=false;this.toggleStateHolder.val(false);}else{this.toggler.removeClass("ui-icon-minusthick").addClass("ui-icon-plusthick");this.cfg.collapsed=true;this.toggleStateHolder.val(true);}var a=this;this.content.slideToggle(this.cfg.toggleSpeed,function(c){if(a.cfg.behaviors){var b=a.cfg.behaviors.toggle;if(b){b.call(this,c);}}});};ice.ace.Panel.prototype.close=function(){this.visibleStateHolder.val(false);var a=this;ice.ace.jq(this.jqId).fadeOut(this.cfg.closeSpeed,function(c){if(a.cfg.behaviors){var b=a.cfg.behaviors.close;if(b){b.call(this,c);}}});};ice.ace.Panel.prototype.show=function(){ice.ace.jq(this.jqId).fadeIn(this.cfg.closeSpeed);this.visibleStateHolder.val(true);};ice.ace.Panel.prototype.setupToggleTrigger=function(){var a=this,b=this.toggler.parent();this.setupTriggerVisuals(b);b.click(function(){a.toggle();});};ice.ace.Panel.prototype.setupCloseTrigger=function(){var a=this,b=ice.ace.jq(this.jqId+"_closer").parent();this.setupTriggerVisuals(b);b.click(function(){a.close();});};ice.ace.Panel.prototype.setupMenuTrigger=function(){var a=ice.ace.jq(this.jqId+"_menu").parent();this.setupTriggerVisuals(a);};ice.ace.Panel.prototype.setupTriggerVisuals=function(a){a.mouseover(function(){ice.ace.jq(this).addClass("ui-state-hover");}).mouseout(function(){ice.ace.jq(this).removeClass("ui-state-hover");});};if(!window.ice){window.ice={};}if(!window.ice.ace){window.ice.ace={};}ice.ace.animation={};ice.ace.animation.run=function(c,b,e,g){var d;if(typeof c.node=="string"){d=ice.ace.jq(ice.ace.escapeClientId(c.node));}else{d=ice.ace.jq(c.node);}var a=c.name.toLowerCase();var f=c.easing||"easeOutQuad";d.queue(function(){if(a=="anim"){var j=c.iterations||1;var k=c.duration||500;for(var h=0;h<j;h++){d.animate(c.from,0,f);d.animate(c.to,k,f);}}else{if(!b){b={};}if(!b.easing){b.easing=f;}d.effect(a,b,e,g);}d.dequeue();});};ice.ace.animation.register=function(a,b){};ice.ace.AccordionPanel=function(c,b){this.id=c;this.cfg=b;this.jqId=ice.ace.escapeClientId(c);this.jq=ice.ace.jq(this.jqId+"_acco");this.stateHolder=ice.ace.jq(this.jqId+"_active");var a=this;this.jq.accordion(this.cfg);if(this.cfg.dynamic&&this.cfg.cache){this.markAsLoaded(this.jq.children("div").get(this.cfg.active));}this.jq.bind("accordionchangestart",function(d,e){a.onTabChange(d,e);});setTimeout(function(){a.jq.accordion("resize");},100);};ice.ace.AccordionPanel.prototype.onTabChange=function(c,d){var a=d.newContent.get(0),b=this.cfg.dynamic&&!this.isLoaded(a);this.stateHolder.val(d.options.active);if(b){this.loadDynamicTab(a);}else{if(this.cfg.ajaxTabChange){this.fireAjaxTabChangeEvent(a);}}};ice.ace.AccordionPanel.prototype.loadDynamicTab=function(b){var a=this,c={source:this.id,execute:this.id,render:this.id};c.onsuccess=function(e){ice.ace.selectCustomUpdates(e,function(g,f){if(g==a.id){if(b){ice.ace.jq(b).children("div").html(f);if(a.cfg.cache){a.markAsLoaded(b);}}}else{ice.ace.AjaxUtils.updateElement(g,f);}});return false;};var d={};d[this.id+"_contentLoad"]=true;if(b){d[this.id+"_newTab"]=b.id;}d[this.id+"_active"]=this.stateHolder.val();d["ice.customUpdate"]=this.id;if(this.cfg.ajaxTabChange){d[this.id+"_tabChange"]=true;}c.params=d;ice.ace.AjaxRequest(c);};ice.ace.AccordionPanel.prototype.fireAjaxTabChangeEvent=function(a){var e=formOf(this.jq.get(0)).id;var b={source:this.id,execute:e},c=this.cfg&&this.cfg.behaviors&&this.cfg.behaviors.panechange;var d={};d[this.id+"_tabChange"]=true;if(a){d[this.id+"_newTab"]=a.id;}d[this.id+"_active"]=this.stateHolder.val();b.params=d;if(ice.ace.jq.isFunction(c)){c(b.params);}else{ice.ace.AjaxRequest(b);}};ice.ace.AccordionPanel.prototype.markAsLoaded=function(a){ice.ace.jq(a).data("loaded",true);};ice.ace.AccordionPanel.prototype.isLoaded=function(a){return ice.ace.jq(a).data("loaded")==true;};ice.ace.AccordionPanel.prototype.select=function(a){this.jq.accordion("activate",a);};ice.ace.AccordionPanel.prototype.collapseAll=function(){this.jq.accordion("activate",false);};ice.ace.NotificationBar=function(b,a){this.id=b;this.cfg=a;this.jq=ice.ace.escapeClientId(this.id);ice.ace.jq(this.jq).css(this.cfg.position,"0");ice.ace.jq(this.jq).css("left","0");if(this.cfg.visible){ice.ace.jq(this.jq).css({display:"block"});}else{ice.ace.jq(this.jq).css({display:"none"});}};ice.ace.NotificationBar.prototype.show=function(){if(this.cfg.effect==="slide"){ice.ace.jq(this.jq).slideDown(this.cfg.effect);}else{if(this.cfg.effect==="fade"){ice.ace.jq(this.jq).fadeIn(this.cfg.effect);}else{if(this.cfg.effect==="none"){ice.ace.jq(this.jq).show();}}}this.cfg.visible=true;var a=this.cfg&&this.cfg.behaviors&&this.cfg.behaviors.display;if(ice.ace.jq.isFunction(a)){a();}};ice.ace.NotificationBar.prototype.hide=function(){if(this.cfg.effect==="slide"){ice.ace.jq(this.jq).slideUp(this.cfg.effect);}else{if(this.cfg.effect==="fade"){ice.ace.jq(this.jq).fadeOut(this.cfg.effect);}else{if(this.cfg.effect==="none"){ice.ace.jq(this.jq).hide();}}}this.cfg.visible=false;var a=this.cfg&&this.cfg.behaviors&&this.cfg.behaviors.close;if(ice.ace.jq.isFunction(a)){a();}};(function(b){var a;b.fn.jqprint=function(d){a=b.extend({},b.fn.jqprint.defaults,d);var c=(this instanceof ice.ace.jq)?this:b(this);if(a.operaSupport&&b.browser.opera){var e=window.open("","jqPrint-preview");e.document.open();var g=e.document;}else{var f=b("<iframe  />");if(!a.debug){f.css({position:"absolute",width:"0px",height:"0px",left:"-600px",top:"-600px"});}f.appendTo("body");var g=f[0].contentWindow.document;}if(a.importCSS){if(b("link[media=print]").length>0){b("link[media=print]").each(function(){g.write("<link type='text/css' rel='stylesheet' href='"+b(this).attr("href")+"' media='print' />");});}else{b("link").each(function(){g.write("<link type='text/css' rel='stylesheet' href='"+b(this).attr("href")+"' />");});}}if(a.printContainer){g.write(c.outer());}else{c.each(function(){g.write(b(this).html());});}g.close();(a.operaSupport&&b.browser.opera?e:f[0].contentWindow).focus();setTimeout(function(){(a.operaSupport&&b.browser.opera?e:f[0].contentWindow).print();if(e){e.close();}},1000);};b.fn.jqprint.defaults={debug:false,importCSS:true,printContainer:true,operaSupport:true};ice.ace.jq.fn.outer=function(){return b(b("<div></div>").html(this.clone())).html();};})(ice.ace.jq);
/*
 * jquery.qtip. The jQuery tooltip plugin
 *
 * Copyright (c) 2009 Craig Thompson
 * http://craigsworks.com
 *
 * Licensed under MIT
 * http://www.opensource.org/licenses/mit-license.php
 *
 * Launch  : February 2009
 * Version : 1.0.0-rc3
 * Released: Tuesday 12th May, 2009 - 00:00
 * Debug: jquery.qtip.debug.js
 */
(function(f){f.fn.qtip=function(B,u){var y,t,A,s,x,w,v,z;if(typeof B=="string"){if(typeof f(this).data("qtip")!=="object"){f.fn.qtip.log.error.call(self,1,f.fn.qtip.constants.NO_TOOLTIP_PRESENT,false);}if(B=="api"){return f(this).data("qtip").interfaces[f(this).data("qtip").current];}else{if(B=="interfaces"){return f(this).data("qtip").interfaces;}}}else{if(!B){B={};}if(typeof B.content!=="object"||(B.content.jquery&&B.content.length>0)){B.content={text:B.content};}if(typeof B.content.title!=="object"){B.content.title={text:B.content.title};}if(typeof B.position!=="object"){B.position={corner:B.position};}if(typeof B.position.corner!=="object"){B.position.corner={target:B.position.corner,tooltip:B.position.corner};}if(typeof B.show!=="object"){B.show={when:B.show};}if(typeof B.show.when!=="object"){B.show.when={event:B.show.when};}if(typeof B.show.effect!=="object"){B.show.effect={type:B.show.effect};}if(typeof B.hide!=="object"){B.hide={when:B.hide};}if(typeof B.hide.when!=="object"){B.hide.when={event:B.hide.when};}if(typeof B.hide.effect!=="object"){B.hide.effect={type:B.hide.effect};}if(typeof B.style!=="object"){B.style={name:B.style};}B.style=c(B.style);s=f.extend(true,{},f.fn.qtip.defaults,B);s.style=a.call({options:s},s.style);s.user=f.extend(true,{},B);}return f(this).each(function(){if(typeof B=="string"){w=B.toLowerCase();A=f(this).qtip("interfaces");if(typeof A=="object"){if(u===true&&w=="destroy"){while(A.length>0){A[A.length-1].destroy();}}else{if(u!==true){A=[f(this).qtip("api")];}for(y=0;y<A.length;y++){if(w=="destroy"){A[y].destroy();}else{if(A[y].status.rendered===true){if(w=="show"){A[y].show();}else{if(w=="hide"){A[y].hide();}else{if(w=="focus"){A[y].focus();}else{if(w=="disable"){A[y].disable(true);}else{if(w=="enable"){A[y].disable(false);}}}}}}}}}}}else{v=f.extend(true,{},s);v.hide.effect.length=s.hide.effect.length;v.show.effect.length=s.show.effect.length;if(v.position.container===false){v.position.container=f(document.body);}if(v.position.target===false){v.position.target=f(this);}if(v.show.when.target===false){v.show.when.target=f(this);}if(v.hide.when.target===false){v.hide.when.target=f(this);}t=f.fn.qtip.interfaces.length;for(y=0;y<t;y++){if(typeof f.fn.qtip.interfaces[y]=="undefined"){t=y;break;}}x=new d(f(this),v,t);f.fn.qtip.interfaces[t]=x;if(typeof f(this).data("qtip")=="object"){if(typeof f(this).attr("qtip")==="undefined"){f(this).data("qtip").current=f(this).data("qtip").interfaces.length;}f(this).data("qtip").interfaces.push(x);}else{f(this).data("qtip",{current:0,interfaces:[x]});}if(v.content.prerender===false&&v.show.when.event!==false&&v.show.ready!==true){v.show.when.target.bind(v.show.when.event+".qtip-"+t+"-create",{qtip:t},function(C){z=f.fn.qtip.interfaces[C.data.qtip];z.options.show.when.target.unbind(z.options.show.when.event+".qtip-"+C.data.qtip+"-create");z.cache.mouse={x:C.pageX,y:C.pageY};p.call(z);z.options.show.when.target.trigger(z.options.show.when.event);});}else{x.cache.mouse={x:v.show.when.target.offset().left,y:v.show.when.target.offset().top};p.call(x);}}});};function d(u,t,v){var s=this;s.id=v;s.options=t;s.status={animated:false,rendered:false,disabled:false,focused:false};s.elements={target:u.addClass(s.options.style.classes.target),tooltip:null,wrapper:null,content:null,contentWrapper:null,title:null,button:null,tip:null,bgiframe:null};s.cache={mouse:{},position:{},toggle:0};s.timers={};f.extend(s,s.options.api,{show:function(y){var x,z;if(!s.status.rendered){return f.fn.qtip.log.error.call(s,2,f.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"show");}if(s.elements.tooltip.css("display")!=="none"){return s;}s.elements.tooltip.stop(true,false);x=s.beforeShow.call(s,y);if(x===false){return s;}function w(){if(s.options.position.type!=="static"){s.focus();}s.onShow.call(s,y);if(f.browser.msie){s.elements.tooltip.get(0).style.removeAttribute("filter");}}s.cache.toggle=1;if(s.options.position.type!=="static"){s.updatePosition(y,(s.options.show.effect.length>0));}if(typeof s.options.show.solo=="object"){z=f(s.options.show.solo);}else{if(s.options.show.solo===true){z=f("div.qtip").not(s.elements.tooltip);}}if(z){z.each(function(){if(f(this).qtip("api").status.rendered===true){f(this).qtip("api").hide();}});}if(typeof s.options.show.effect.type=="function"){s.options.show.effect.type.call(s.elements.tooltip,s.options.show.effect.length);s.elements.tooltip.queue(function(){w();f(this).dequeue();});}else{switch(s.options.show.effect.type.toLowerCase()){case"fade":s.elements.tooltip.fadeIn(s.options.show.effect.length,w);break;case"slide":s.elements.tooltip.slideDown(s.options.show.effect.length,function(){w();if(s.options.position.type!=="static"){s.updatePosition(y,true);}});break;case"grow":s.elements.tooltip.show(s.options.show.effect.length,w);break;default:s.elements.tooltip.show(null,w);break;}s.elements.tooltip.addClass(s.options.style.classes.active);}return f.fn.qtip.log.error.call(s,1,f.fn.qtip.constants.EVENT_SHOWN,"show");},hide:function(y){var x;if(!s.status.rendered){return f.fn.qtip.log.error.call(s,2,f.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"hide");}else{if(s.elements.tooltip.css("display")==="none"){return s;}}clearTimeout(s.timers.show);s.elements.tooltip.stop(true,false);x=s.beforeHide.call(s,y);if(x===false){return s;}function w(){s.onHide.call(s,y);}s.cache.toggle=0;if(typeof s.options.hide.effect.type=="function"){s.options.hide.effect.type.call(s.elements.tooltip,s.options.hide.effect.length);s.elements.tooltip.queue(function(){w();f(this).dequeue();});}else{switch(s.options.hide.effect.type.toLowerCase()){case"fade":s.elements.tooltip.fadeOut(s.options.hide.effect.length,w);break;case"slide":s.elements.tooltip.slideUp(s.options.hide.effect.length,w);break;case"grow":s.elements.tooltip.hide(s.options.hide.effect.length,w);break;default:s.elements.tooltip.hide(null,w);break;}s.elements.tooltip.removeClass(s.options.style.classes.active);}return f.fn.qtip.log.error.call(s,1,f.fn.qtip.constants.EVENT_HIDDEN,"hide");},updatePosition:function(x,y){var D,H,M,K,I,F,z,J,C,E,L,B,G,A,w;if(!s.status.rendered){return f.fn.qtip.log.error.call(s,2,f.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"updatePosition");}else{if(s.options.position.type=="static"){return f.fn.qtip.log.error.call(s,1,f.fn.qtip.constants.CANNOT_POSITION_STATIC,"updatePosition");}}H={position:{left:0,top:0},dimensions:{height:0,width:0},corner:s.options.position.corner.target};M={position:s.getPosition(),dimensions:s.getDimensions(),corner:s.options.position.corner.tooltip};if(s.options.position.target!=="mouse"){if(s.options.position.target.get(0).nodeName.toLowerCase()=="area"){K=s.options.position.target.attr("coords").split(",");for(D=0;D<K.length;D++){K[D]=parseInt(K[D]);}I=s.options.position.target.parent("map").attr("name");F=f('img[usemap="#'+I+'"]:first').offset();H.position={left:Math.floor(F.left+K[0]),top:Math.floor(F.top+K[1])};switch(s.options.position.target.attr("shape").toLowerCase()){case"rect":H.dimensions={width:Math.ceil(Math.abs(K[2]-K[0])),height:Math.ceil(Math.abs(K[3]-K[1]))};break;case"circle":H.dimensions={width:K[2]+1,height:K[2]+1};break;case"poly":H.dimensions={width:K[0],height:K[1]};for(D=0;D<K.length;D++){if(D%2==0){if(K[D]>H.dimensions.width){H.dimensions.width=K[D];}if(K[D]<K[0]){H.position.left=Math.floor(F.left+K[D]);}}else{if(K[D]>H.dimensions.height){H.dimensions.height=K[D];}if(K[D]<K[1]){H.position.top=Math.floor(F.top+K[D]);}}}H.dimensions.width=H.dimensions.width-(H.position.left-F.left);H.dimensions.height=H.dimensions.height-(H.position.top-F.top);break;default:return f.fn.qtip.log.error.call(s,4,f.fn.qtip.constants.INVALID_AREA_SHAPE,"updatePosition");break;}H.dimensions.width-=2;H.dimensions.height-=2;}else{if(s.options.position.target.add(document.body).length===1){H.position={left:f(document).scrollLeft(),top:f(document).scrollTop()};H.dimensions={height:f(window).height(),width:f(window).width()};}else{if(typeof s.options.position.target.attr("qtip")!=="undefined"){H.position=s.options.position.target.qtip("api").cache.position;}else{H.position=s.options.position.target.offset();}H.dimensions={height:s.options.position.target.outerHeight(),width:s.options.position.target.outerWidth()};}}z=f.extend({},H.position);if(H.corner.search(/right/i)!==-1){z.left+=H.dimensions.width;}if(H.corner.search(/bottom/i)!==-1){z.top+=H.dimensions.height;}if(H.corner.search(/((top|bottom)Middle)|center/)!==-1){z.left+=(H.dimensions.width/2);}if(H.corner.search(/((left|right)Middle)|center/)!==-1){z.top+=(H.dimensions.height/2);}w=s.options.position.target.offsetParent().offset();z.left-=w.left;z.top-=w.top;}else{H.position=z={left:s.cache.mouse.x,top:s.cache.mouse.y};H.dimensions={height:1,width:1};}if(M.corner.search(/right/i)!==-1){z.left-=M.dimensions.width;}if(M.corner.search(/bottom/i)!==-1){z.top-=M.dimensions.height;}if(M.corner.search(/((top|bottom)Middle)|center/)!==-1){z.left-=(M.dimensions.width/2);}if(M.corner.search(/((left|right)Middle)|center/)!==-1){z.top-=(M.dimensions.height/2);}J=(f.browser.msie)?1:0;C=(f.browser.msie&&parseInt(f.browser.version.charAt(0))===6)?1:0;if(s.options.style.border.radius>0){if(M.corner.search(/Left/)!==-1){z.left-=s.options.style.border.radius;}else{if(M.corner.search(/Right/)!==-1){z.left+=s.options.style.border.radius;}}if(M.corner.search(/Top/)!==-1){z.top-=s.options.style.border.radius;}else{if(M.corner.search(/Bottom/)!==-1){z.top+=s.options.style.border.radius;}}}if(J){if(M.corner.search(/top/)!==-1){z.top-=J;}else{if(M.corner.search(/bottom/)!==-1){z.top+=J;}}if(M.corner.search(/left/)!==-1){z.left-=J;}else{if(M.corner.search(/right/)!==-1){z.left+=J;}}if(M.corner.search(/leftMiddle|rightMiddle/)!==-1){z.top-=1;}}if(s.options.position.adjust.screen===true){z=o.call(s,z,H,M);}if(s.options.position.target==="mouse"&&s.options.position.adjust.mouse===true){if(s.options.position.adjust.screen===true&&s.elements.tip){L=s.elements.tip.attr("rel");}else{L=s.options.position.corner.tooltip;}z.left+=(L.search(/right/i)!==-1)?-6:6;z.top+=(L.search(/bottom/i)!==-1)?-6:6;}if(!s.elements.bgiframe&&f.browser.msie&&parseInt(f.browser.version.charAt(0))==6){f("select, object").each(function(){B=f(this).offset();B.bottom=B.top+f(this).height();B.right=B.left+f(this).width();if(z.top+M.dimensions.height>=B.top&&z.left+M.dimensions.width>=B.left){k.call(s);}});}z.left+=s.options.position.adjust.x;z.top+=s.options.position.adjust.y;G=s.getPosition();if(z.left!=G.left||z.top!=G.top){A=s.beforePositionUpdate.call(s,x);if(A===false){return s;}s.cache.position=z;if(y===true){s.status.animated=true;s.elements.tooltip.animate(z,200,"swing",function(){s.status.animated=false;});}else{s.elements.tooltip.css(z);}s.onPositionUpdate.call(s,x);if(typeof x!=="undefined"&&x.type&&x.type!=="mousemove"){f.fn.qtip.log.error.call(s,1,f.fn.qtip.constants.EVENT_POSITION_UPDATED,"updatePosition");}}return s;},updateWidth:function(w){var x;if(!s.status.rendered){return f.fn.qtip.log.error.call(s,2,f.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"updateWidth");}else{if(w&&typeof w!=="number"){return f.fn.qtip.log.error.call(s,2,"newWidth must be of type number","updateWidth");}}x=s.elements.contentWrapper.siblings().add(s.elements.tip).add(s.elements.button);if(!w){if(typeof s.options.style.width.value=="number"){w=s.options.style.width.value;}else{s.elements.tooltip.css({width:"auto"});x.hide();if(f.browser.msie){s.elements.wrapper.add(s.elements.contentWrapper.children()).css({zoom:"normal"});}w=s.getDimensions().width+1;if(!s.options.style.width.value){if(w>s.options.style.width.max){w=s.options.style.width.max;}if(w<s.options.style.width.min){w=s.options.style.width.min;}}}}if(w%2!==0){w-=1;}s.elements.tooltip.width(w);x.show();if(s.options.style.border.radius){s.elements.tooltip.find(".qtip-betweenCorners").each(function(y){f(this).width(w-(s.options.style.border.radius*2));});}if(f.browser.msie){s.elements.wrapper.add(s.elements.contentWrapper.children()).css({zoom:"1"});s.elements.wrapper.width(w);if(s.elements.bgiframe){s.elements.bgiframe.width(w).height(s.getDimensions.height);}}return f.fn.qtip.log.error.call(s,1,f.fn.qtip.constants.EVENT_WIDTH_UPDATED,"updateWidth");},updateStyle:function(w){var z,A,x,y,B;if(!s.status.rendered){return f.fn.qtip.log.error.call(s,2,f.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"updateStyle");}else{if(typeof w!=="string"||!f.fn.qtip.styles[w]){return f.fn.qtip.log.error.call(s,2,f.fn.qtip.constants.STYLE_NOT_DEFINED,"updateStyle");}}s.options.style=a.call(s,f.fn.qtip.styles[w],s.options.user.style);s.elements.content.css(q(s.options.style));if(s.options.content.title.text!==false){s.elements.title.css(q(s.options.style.title,true));}s.elements.contentWrapper.css({borderColor:s.options.style.border.color});if(s.options.style.tip.corner!==false){if(f("<canvas>").get(0).getContext){z=s.elements.tooltip.find(".qtip-tip canvas:first");x=z.get(0).getContext("2d");x.clearRect(0,0,300,300);y=z.parent("div[rel]:first").attr("rel");B=b(y,s.options.style.tip.size.width,s.options.style.tip.size.height);h.call(s,z,B,s.options.style.tip.color||s.options.style.border.color);}else{if(f.browser.msie){z=s.elements.tooltip.find('.qtip-tip [nodeName="shape"]');z.attr("fillcolor",s.options.style.tip.color||s.options.style.border.color);}}}if(s.options.style.border.radius>0){s.elements.tooltip.find(".qtip-betweenCorners").css({backgroundColor:s.options.style.border.color});if(f("<canvas>").get(0).getContext){A=g(s.options.style.border.radius);s.elements.tooltip.find(".qtip-wrapper canvas").each(function(){x=f(this).get(0).getContext("2d");x.clearRect(0,0,300,300);y=f(this).parent("div[rel]:first").attr("rel");r.call(s,f(this),A[y],s.options.style.border.radius,s.options.style.border.color);});}else{if(f.browser.msie){s.elements.tooltip.find('.qtip-wrapper [nodeName="arc"]').each(function(){f(this).attr("fillcolor",s.options.style.border.color);});}}}return f.fn.qtip.log.error.call(s,1,f.fn.qtip.constants.EVENT_STYLE_UPDATED,"updateStyle");},updateContent:function(A,y){var z,x,w;if(!s.status.rendered){return f.fn.qtip.log.error.call(s,2,f.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"updateContent");}else{if(!A){return f.fn.qtip.log.error.call(s,2,f.fn.qtip.constants.NO_CONTENT_PROVIDED,"updateContent");}}z=s.beforeContentUpdate.call(s,A);if(typeof z=="string"){A=z;}else{if(z===false){return;}}if(f.browser.msie){s.elements.contentWrapper.children().css({zoom:"normal"});}if(A.jquery&&A.length>0){A.clone(true).appendTo(s.elements.content).show();}else{s.elements.content.html(A);}x=s.elements.content.find("img[complete=false]");if(x.length>0){w=0;x.each(function(C){f('<img src="'+f(this).attr("src")+'" />').load(function(){if(++w==x.length){B();}});});}else{B();}function B(){s.updateWidth();if(y!==false){if(s.options.position.type!=="static"){s.updatePosition(s.elements.tooltip.is(":visible"),true);}if(s.options.style.tip.corner!==false){n.call(s);}}}s.onContentUpdate.call(s);return f.fn.qtip.log.error.call(s,1,f.fn.qtip.constants.EVENT_CONTENT_UPDATED,"loadContent");},loadContent:function(w,z,A){var y;if(!s.status.rendered){return f.fn.qtip.log.error.call(s,2,f.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"loadContent");}y=s.beforeContentLoad.call(s);if(y===false){return s;}if(A=="post"){f.post(w,z,x);}else{f.get(w,z,x);}function x(B){s.onContentLoad.call(s);f.fn.qtip.log.error.call(s,1,f.fn.qtip.constants.EVENT_CONTENT_LOADED,"loadContent");s.updateContent(B);}return s;},updateTitle:function(w){if(!s.status.rendered){return f.fn.qtip.log.error.call(s,2,f.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"updateTitle");}else{if(!w){return f.fn.qtip.log.error.call(s,2,f.fn.qtip.constants.NO_CONTENT_PROVIDED,"updateTitle");}}returned=s.beforeTitleUpdate.call(s);if(returned===false){return s;}if(s.elements.button){s.elements.button=s.elements.button.clone(true);}s.elements.title.html(w);if(s.elements.button){s.elements.title.prepend(s.elements.button);}s.onTitleUpdate.call(s);return f.fn.qtip.log.error.call(s,1,f.fn.qtip.constants.EVENT_TITLE_UPDATED,"updateTitle");},focus:function(A){var y,x,w,z;if(!s.status.rendered){return f.fn.qtip.log.error.call(s,2,f.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"focus");}else{if(s.options.position.type=="static"){return f.fn.qtip.log.error.call(s,1,f.fn.qtip.constants.CANNOT_FOCUS_STATIC,"focus");}}y=parseInt(s.elements.tooltip.css("z-index"));x=6000+f("div.qtip[qtip]").length-1;if(!s.status.focused&&y!==x){z=s.beforeFocus.call(s,A);if(z===false){return s;}f("div.qtip[qtip]").not(s.elements.tooltip).each(function(){if(f(this).qtip("api").status.rendered===true){w=parseInt(f(this).css("z-index"));if(typeof w=="number"&&w>-1){f(this).css({zIndex:parseInt(f(this).css("z-index"))-1});}f(this).qtip("api").status.focused=false;}});s.elements.tooltip.css({zIndex:x});s.status.focused=true;s.onFocus.call(s,A);f.fn.qtip.log.error.call(s,1,f.fn.qtip.constants.EVENT_FOCUSED,"focus");}return s;},disable:function(w){if(!s.status.rendered){return f.fn.qtip.log.error.call(s,2,f.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"disable");}if(w){if(!s.status.disabled){s.status.disabled=true;f.fn.qtip.log.error.call(s,1,f.fn.qtip.constants.EVENT_DISABLED,"disable");}else{f.fn.qtip.log.error.call(s,1,f.fn.qtip.constants.TOOLTIP_ALREADY_DISABLED,"disable");}}else{if(s.status.disabled){s.status.disabled=false;f.fn.qtip.log.error.call(s,1,f.fn.qtip.constants.EVENT_ENABLED,"disable");}else{f.fn.qtip.log.error.call(s,1,f.fn.qtip.constants.TOOLTIP_ALREADY_ENABLED,"disable");}}return s;},destroy:function(){var w,x,y;x=s.beforeDestroy.call(s);if(x===false){return s;}if(s.status.rendered){s.options.show.when.target.unbind("mousemove.qtip",s.updatePosition);s.options.show.when.target.unbind("mouseout.qtip",s.hide);s.options.show.when.target.unbind(s.options.show.when.event+".qtip");s.options.hide.when.target.unbind(s.options.hide.when.event+".qtip");s.elements.tooltip.unbind(s.options.hide.when.event+".qtip");s.elements.tooltip.unbind("mouseover.qtip",s.focus);s.elements.tooltip.remove();}else{s.options.show.when.target.unbind(s.options.show.when.event+".qtip-create");}if(typeof s.elements.target.data("qtip")=="object"){y=s.elements.target.data("qtip").interfaces;if(typeof y=="object"&&y.length>0){for(w=0;w<y.length-1;w++){if(y[w].id==s.id){y.splice(w,1);}}}}delete f.fn.qtip.interfaces[s.id];if(typeof y=="object"&&y.length>0){s.elements.target.data("qtip").current=y.length-1;}else{s.elements.target.removeData("qtip");}s.onDestroy.call(s);f.fn.qtip.log.error.call(s,1,f.fn.qtip.constants.EVENT_DESTROYED,"destroy");return s.elements.target;},getPosition:function(){var w,x;if(!s.status.rendered){return f.fn.qtip.log.error.call(s,2,f.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"getPosition");}w=(s.elements.tooltip.css("display")!=="none")?false:true;if(w){s.elements.tooltip.css({visiblity:"hidden"}).show();}x=s.elements.tooltip.offset();if(w){s.elements.tooltip.css({visiblity:"visible"}).hide();}return x;},getDimensions:function(){var w,x;if(!s.status.rendered){return f.fn.qtip.log.error.call(s,2,f.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"getDimensions");}w=(!s.elements.tooltip.is(":visible"))?true:false;if(w){s.elements.tooltip.css({visiblity:"hidden"}).show();}x={height:s.elements.tooltip.outerHeight(),width:s.elements.tooltip.outerWidth()};if(w){s.elements.tooltip.css({visiblity:"visible"}).hide();}return x;}});}function p(){var s,w,u,t,v,y,x;s=this;s.beforeRender.call(s);s.status.rendered=true;s.elements.tooltip='<div qtip="'+s.id+'" class="qtip '+(s.options.style.classes.tooltip||s.options.style)+'"style="display:none; -moz-border-radius:0; -webkit-border-radius:0; border-radius:0;position:'+s.options.position.type+';">  <div class="qtip-wrapper" style="position:relative; overflow:hidden; text-align:left;">    <div class="qtip-contentWrapper" style="overflow:hidden;">       <div class="qtip-content '+s.options.style.classes.content+'"></div></div></div></div>';s.elements.tooltip=f(s.elements.tooltip);s.elements.tooltip.appendTo(s.options.position.container);s.elements.tooltip.data("qtip",{current:0,interfaces:[s]});s.elements.wrapper=s.elements.tooltip.children("div:first");s.elements.contentWrapper=s.elements.wrapper.children("div:first").css({background:s.options.style.background});s.elements.content=s.elements.contentWrapper.children("div:first").css(q(s.options.style));if(f.browser.msie){s.elements.wrapper.add(s.elements.content).css({zoom:1});}if(s.options.hide.when.event=="unfocus"){s.elements.tooltip.attr("unfocus",true);}if(typeof s.options.style.width.value=="number"){s.updateWidth();}if(f("<canvas>").get(0).getContext||f.browser.msie){if(s.options.style.border.radius>0){m.call(s);}else{s.elements.contentWrapper.css({border:s.options.style.border.width+"px solid "+s.options.style.border.color});}if(s.options.style.tip.corner!==false){e.call(s);}}else{s.elements.contentWrapper.css({border:s.options.style.border.width+"px solid "+s.options.style.border.color});s.options.style.border.radius=0;s.options.style.tip.corner=false;f.fn.qtip.log.error.call(s,2,f.fn.qtip.constants.CANVAS_VML_NOT_SUPPORTED,"render");}if((typeof s.options.content.text=="string"&&s.options.content.text.length>0)||(s.options.content.text.jquery&&s.options.content.text.length>0)){u=s.options.content.text;}else{if(typeof s.elements.target.attr("title")=="string"&&s.elements.target.attr("title").length>0){u=s.elements.target.attr("title").replace("\\n","<br />");s.elements.target.attr("title","");}else{if(typeof s.elements.target.attr("alt")=="string"&&s.elements.target.attr("alt").length>0){u=s.elements.target.attr("alt").replace("\\n","<br />");s.elements.target.attr("alt","");}else{u=" ";f.fn.qtip.log.error.call(s,1,f.fn.qtip.constants.NO_VALID_CONTENT,"render");}}}if(s.options.content.title.text!==false){j.call(s);}s.updateContent(u);l.call(s);if(s.options.show.ready===true){s.show();}if(s.options.content.url!==false){t=s.options.content.url;v=s.options.content.data;y=s.options.content.method||"get";s.loadContent(t,v,y);}s.onRender.call(s);f.fn.qtip.log.error.call(s,1,f.fn.qtip.constants.EVENT_RENDERED,"render");}function m(){var F,z,t,B,x,E,u,G,D,y,w,C,A,s,v;F=this;F.elements.wrapper.find(".qtip-borderBottom, .qtip-borderTop").remove();t=F.options.style.border.width;B=F.options.style.border.radius;x=F.options.style.border.color||F.options.style.tip.color;E=g(B);u={};for(z in E){u[z]='<div rel="'+z+'" style="'+((z.search(/Left/)!==-1)?"left":"right")+":0; position:absolute; height:"+B+"px; width:"+B+'px; overflow:hidden; line-height:0.1px; font-size:1px">';if(f("<canvas>").get(0).getContext){u[z]+='<canvas height="'+B+'" width="'+B+'" style="vertical-align: top"></canvas>';}else{if(f.browser.msie){G=B*2+3;u[z]+='<v:arc stroked="false" fillcolor="'+x+'" startangle="'+E[z][0]+'" endangle="'+E[z][1]+'" style="width:'+G+"px; height:"+G+"px; margin-top:"+((z.search(/bottom/)!==-1)?-2:-1)+"px; margin-left:"+((z.search(/Right/)!==-1)?E[z][2]-3.5:-1)+'px; vertical-align:top; display:inline-block; behavior:url(#default#VML)"></v:arc>';}}u[z]+="</div>";}D=F.getDimensions().width-(Math.max(t,B)*2);y='<div class="qtip-betweenCorners" style="height:'+B+"px; width:"+D+"px; overflow:hidden; background-color:"+x+'; line-height:0.1px; font-size:1px;">';w='<div class="qtip-borderTop" dir="ltr" style="height:'+B+"px; margin-left:"+B+'px; line-height:0.1px; font-size:1px; padding:0;">'+u.topLeft+u.topRight+y;F.elements.wrapper.prepend(w);C='<div class="qtip-borderBottom" dir="ltr" style="height:'+B+"px; margin-left:"+B+'px; line-height:0.1px; font-size:1px; padding:0;">'+u.bottomLeft+u.bottomRight+y;F.elements.wrapper.append(C);if(f("<canvas>").get(0).getContext){F.elements.wrapper.find("canvas").each(function(){A=E[f(this).parent("[rel]:first").attr("rel")];r.call(F,f(this),A,B,x);});}else{if(f.browser.msie){F.elements.tooltip.append('<v:image style="behavior:url(#default#VML);"></v:image>');}}s=Math.max(B,(B+(t-B)));v=Math.max(t-B,0);F.elements.contentWrapper.css({border:"0px solid "+x,borderWidth:v+"px "+s+"px"});}function r(u,w,s,t){var v=u.get(0).getContext("2d");v.fillStyle=t;v.beginPath();v.arc(w[0],w[1],s,0,Math.PI*2,false);v.fill();}function e(v){var t,s,x,u,w;t=this;if(t.elements.tip!==null){t.elements.tip.remove();}s=t.options.style.tip.color||t.options.style.border.color;if(t.options.style.tip.corner===false){return;}else{if(!v){v=t.options.style.tip.corner;}}x=b(v,t.options.style.tip.size.width,t.options.style.tip.size.height);t.elements.tip='<div class="'+t.options.style.classes.tip+'" dir="ltr" rel="'+v+'" style="position:absolute; height:'+t.options.style.tip.size.height+"px; width:"+t.options.style.tip.size.width+'px; margin:0 auto; line-height:0.1px; font-size:1px;">';if(f("<canvas>").get(0).getContext){t.elements.tip+='<canvas height="'+t.options.style.tip.size.height+'" width="'+t.options.style.tip.size.width+'"></canvas>';}else{if(f.browser.msie){u=t.options.style.tip.size.width+","+t.options.style.tip.size.height;w="m"+x[0][0]+","+x[0][1];w+=" l"+x[1][0]+","+x[1][1];w+=" "+x[2][0]+","+x[2][1];w+=" xe";t.elements.tip+='<v:shape fillcolor="'+s+'" stroked="false" filled="true" path="'+w+'" coordsize="'+u+'" style="width:'+t.options.style.tip.size.width+"px; height:"+t.options.style.tip.size.height+"px; line-height:0.1px; display:inline-block; behavior:url(#default#VML); vertical-align:"+((v.search(/top/)!==-1)?"bottom":"top")+'"></v:shape>';t.elements.tip+='<v:image style="behavior:url(#default#VML);"></v:image>';t.elements.contentWrapper.css("position","relative");}}t.elements.tooltip.prepend(t.elements.tip+"</div>");t.elements.tip=t.elements.tooltip.find("."+t.options.style.classes.tip).eq(0);if(f("<canvas>").get(0).getContext){h.call(t,t.elements.tip.find("canvas:first"),x,s);}if(v.search(/top/)!==-1&&f.browser.msie&&parseInt(f.browser.version.charAt(0))===6){t.elements.tip.css({marginTop:-4});}n.call(t,v);}function h(t,v,s){var u=t.get(0).getContext("2d");u.fillStyle=s;u.beginPath();u.moveTo(v[0][0],v[0][1]);u.lineTo(v[1][0],v[1][1]);u.lineTo(v[2][0],v[2][1]);u.fill();}function n(u){var t,w,s,x,v;t=this;if(t.options.style.tip.corner===false||!t.elements.tip){return;}if(!u){u=t.elements.tip.attr("rel");}w=positionAdjust=(f.browser.msie)?1:0;t.elements.tip.css(u.match(/left|right|top|bottom/)[0],0);if(u.search(/top|bottom/)!==-1){if(f.browser.msie){if(parseInt(f.browser.version.charAt(0))===6){positionAdjust=(u.search(/top/)!==-1)?-3:1;}else{positionAdjust=(u.search(/top/)!==-1)?1:2;}}if(u.search(/Middle/)!==-1){t.elements.tip.css({left:"50%",marginLeft:-(t.options.style.tip.size.width/2)});}else{if(u.search(/Left/)!==-1){t.elements.tip.css({left:t.options.style.border.radius-w});}else{if(u.search(/Right/)!==-1){t.elements.tip.css({right:t.options.style.border.radius+w});}}}if(u.search(/top/)!==-1){t.elements.tip.css({top:-positionAdjust});}else{t.elements.tip.css({bottom:positionAdjust});}}else{if(u.search(/left|right/)!==-1){if(f.browser.msie){positionAdjust=(parseInt(f.browser.version.charAt(0))===6)?1:((u.search(/left/)!==-1)?1:2);}if(u.search(/Middle/)!==-1){t.elements.tip.css({top:"50%",marginTop:-(t.options.style.tip.size.height/2)});}else{if(u.search(/Top/)!==-1){t.elements.tip.css({top:t.options.style.border.radius-w});}else{if(u.search(/Bottom/)!==-1){t.elements.tip.css({bottom:t.options.style.border.radius+w});}}}if(u.search(/left/)!==-1){t.elements.tip.css({left:-positionAdjust});}else{t.elements.tip.css({right:positionAdjust});}}}s="padding-"+u.match(/left|right|top|bottom/)[0];x=t.options.style.tip.size[(s.search(/left|right/)!==-1)?"width":"height"];t.elements.tooltip.css("padding",0);t.elements.tooltip.css(s,x);if(f.browser.msie&&parseInt(f.browser.version.charAt(0))==6){v=parseInt(t.elements.tip.css("margin-top"))||0;v+=parseInt(t.elements.content.css("margin-top"))||0;t.elements.tip.css({marginTop:v});}}function j(){var s=this;if(s.elements.title!==null){s.elements.title.remove();}s.elements.title=f('<div class="'+s.options.style.classes.title+'">').css(q(s.options.style.title,true)).css({zoom:(f.browser.msie)?1:0}).prependTo(s.elements.contentWrapper);if(s.options.content.title.text){s.updateTitle.call(s,s.options.content.title.text);}if(s.options.content.title.button!==false&&typeof s.options.content.title.button=="string"){s.elements.button=f('<a class="'+s.options.style.classes.button+'" style="float:right; position: relative"></a>').css(q(s.options.style.button,true)).html(s.options.content.title.button).prependTo(s.elements.title).click(function(t){if(!s.status.disabled){s.hide(t);}});}}function l(){var t,v,u,s;t=this;v=t.options.show.when.target;u=t.options.hide.when.target;if(t.options.hide.fixed){u=u.add(t.elements.tooltip);}if(t.options.hide.when.event=="inactive"){s=["click","dblclick","mousedown","mouseup","mousemove","mouseout","mouseenter","mouseleave","mouseover"];function y(z){if(t.status.disabled===true){return;}clearTimeout(t.timers.inactive);t.timers.inactive=setTimeout(function(){f(s).each(function(){u.unbind(this+".qtip-inactive");t.elements.content.unbind(this+".qtip-inactive");});t.hide(z);},t.options.hide.delay);}}else{if(t.options.hide.fixed===true){t.elements.tooltip.bind("mouseover.qtip",function(){if(t.status.disabled===true){return;}clearTimeout(t.timers.hide);});}}function x(z){if(t.status.disabled===true){return;}if(t.options.hide.when.event=="inactive"){f(s).each(function(){u.bind(this+".qtip-inactive",y);t.elements.content.bind(this+".qtip-inactive",y);});y();}clearTimeout(t.timers.show);clearTimeout(t.timers.hide);t.timers.show=setTimeout(function(){t.show(z);},t.options.show.delay);}function w(z){if(t.status.disabled===true){return;}if(t.options.hide.fixed===true&&t.options.hide.when.event.search(/mouse(out|leave)/i)!==-1&&f(z.relatedTarget).parents("div.qtip[qtip]").length>0){z.stopPropagation();z.preventDefault();clearTimeout(t.timers.hide);return false;}clearTimeout(t.timers.show);clearTimeout(t.timers.hide);t.elements.tooltip.stop(true,true);t.timers.hide=setTimeout(function(){t.hide(z);},t.options.hide.delay);}if((t.options.show.when.target.add(t.options.hide.when.target).length===1&&t.options.show.when.event==t.options.hide.when.event&&t.options.hide.when.event!=="inactive")||t.options.hide.when.event=="unfocus"){t.cache.toggle=0;v.bind(t.options.show.when.event+".qtip",function(z){if(t.cache.toggle==0){x(z);}else{w(z);}});}else{v.bind(t.options.show.when.event+".qtip",x);if(t.options.hide.when.event!=="inactive"){u.bind(t.options.hide.when.event+".qtip",w);}}if(t.options.position.type.search(/(fixed|absolute)/)!==-1){t.elements.tooltip.bind("mouseover.qtip",t.focus);}if(t.options.position.target==="mouse"&&t.options.position.type!=="static"){v.bind("mousemove.qtip",function(z){t.cache.mouse={x:z.pageX,y:z.pageY};if(t.status.disabled===false&&t.options.position.adjust.mouse===true&&t.options.position.type!=="static"&&t.elements.tooltip.css("display")!=="none"){t.updatePosition(z);}});}}function o(u,v,A){var z,s,x,y,t,w;z=this;if(A.corner=="center"){return v.position;}s=f.extend({},u);y={x:false,y:false};t={left:(s.left<f.fn.qtip.cache.screen.scroll.left),right:(s.left+A.dimensions.width+2>=f.fn.qtip.cache.screen.width+f.fn.qtip.cache.screen.scroll.left),top:(s.top<f.fn.qtip.cache.screen.scroll.top),bottom:(s.top+A.dimensions.height+2>=f.fn.qtip.cache.screen.height+f.fn.qtip.cache.screen.scroll.top)};x={left:(t.left&&(A.corner.search(/right/i)!=-1||(A.corner.search(/right/i)==-1&&!t.right))),right:(t.right&&(A.corner.search(/left/i)!=-1||(A.corner.search(/left/i)==-1&&!t.left))),top:(t.top&&A.corner.search(/top/i)==-1),bottom:(t.bottom&&A.corner.search(/bottom/i)==-1)};if(x.left){if(z.options.position.target!=="mouse"){s.left=v.position.left+v.dimensions.width;}else{s.left=z.cache.mouse.x;}y.x="Left";}else{if(x.right){if(z.options.position.target!=="mouse"){s.left=v.position.left-A.dimensions.width;}else{s.left=z.cache.mouse.x-A.dimensions.width;}y.x="Right";}}if(x.top){if(z.options.position.target!=="mouse"){s.top=v.position.top+v.dimensions.height;}else{s.top=z.cache.mouse.y;}y.y="top";}else{if(x.bottom){if(z.options.position.target!=="mouse"){s.top=v.position.top-A.dimensions.height;}else{s.top=z.cache.mouse.y-A.dimensions.height;}y.y="bottom";}}if(s.left<0){s.left=u.left;y.x=false;}if(s.top<0){s.top=u.top;y.y=false;}if(z.options.style.tip.corner!==false){s.corner=new String(A.corner);if(y.x!==false){s.corner=s.corner.replace(/Left|Right|Middle/,y.x);}if(y.y!==false){s.corner=s.corner.replace(/top|bottom/,y.y);}if(s.corner!==z.elements.tip.attr("rel")){e.call(z,s.corner);}}return s;}function q(u,t){var v,s;v=f.extend(true,{},u);for(s in v){if(t===true&&s.search(/(tip|classes)/i)!==-1){delete v[s];}else{if(!t&&s.search(/(width|border|tip|title|classes|user)/i)!==-1){delete v[s];}}}return v;}function c(s){if(typeof s.tip!=="object"){s.tip={corner:s.tip};}if(typeof s.tip.size!=="object"){s.tip.size={width:s.tip.size,height:s.tip.size};}if(typeof s.border!=="object"){s.border={width:s.border};}if(typeof s.width!=="object"){s.width={value:s.width};}if(typeof s.width.max=="string"){s.width.max=parseInt(s.width.max.replace(/([0-9]+)/i,"$1"));}if(typeof s.width.min=="string"){s.width.min=parseInt(s.width.min.replace(/([0-9]+)/i,"$1"));}if(typeof s.tip.size.x=="number"){s.tip.size.width=s.tip.size.x;delete s.tip.size.x;}if(typeof s.tip.size.y=="number"){s.tip.size.height=s.tip.size.y;delete s.tip.size.y;}return s;}function a(){var s,t,u,x,v,w;s=this;u=[true,{}];for(t=0;t<arguments.length;t++){u.push(arguments[t]);}x=[f.extend.apply(f,u)];while(typeof x[0].name=="string"){x.unshift(c(f.fn.qtip.styles[x[0].name]));}x.unshift(true,{classes:{tooltip:"qtip-"+(arguments[0].name||"defaults")}},f.fn.qtip.styles.defaults);v=f.extend.apply(f,x);w=(f.browser.msie)?1:0;v.tip.size.width+=w;v.tip.size.height+=w;if(v.tip.size.width%2>0){v.tip.size.width+=1;}if(v.tip.size.height%2>0){v.tip.size.height+=1;}if(v.tip.corner===true){v.tip.corner=(s.options.position.corner.tooltip==="center")?false:s.options.position.corner.tooltip;}return v;}function b(v,u,t){var s={bottomRight:[[0,0],[u,t],[u,0]],bottomLeft:[[0,0],[u,0],[0,t]],topRight:[[0,t],[u,0],[u,t]],topLeft:[[0,0],[0,t],[u,t]],topMiddle:[[0,t],[u/2,0],[u,t]],bottomMiddle:[[0,0],[u,0],[u/2,t]],rightMiddle:[[0,0],[u,t/2],[0,t]],leftMiddle:[[u,0],[u,t],[0,t/2]]};s.leftTop=s.bottomRight;s.rightTop=s.bottomLeft;s.leftBottom=s.topRight;s.rightBottom=s.topLeft;return s[v];}function g(s){var t;if(f("<canvas>").get(0).getContext){t={topLeft:[s,s],topRight:[0,s],bottomLeft:[s,0],bottomRight:[0,0]};}else{if(f.browser.msie){t={topLeft:[-90,90,0],topRight:[-90,90,-s],bottomLeft:[90,270,0],bottomRight:[90,270,-s]};}}return t;}function k(){var s,t,u;s=this;u=s.getDimensions();t='<iframe class="qtip-bgiframe" frameborder="0" tabindex="-1" src="javascript:false" style="display:block; position:absolute; z-index:-1; filter:alpha(opacity=\'0\'); border: 1px solid red; height:'+u.height+"px; width:"+u.width+'px" />';s.elements.bgiframe=s.elements.wrapper.prepend(t).children(".qtip-bgiframe:first");}f(document).ready(function(){f.fn.qtip.cache={screen:{scroll:{left:f(window).scrollLeft(),top:f(window).scrollTop()},width:f(window).width(),height:f(window).height()}};var s;f(window).bind("resize scroll",function(t){clearTimeout(s);s=setTimeout(function(){if(t.type==="scroll"){f.fn.qtip.cache.screen.scroll={left:f(window).scrollLeft(),top:f(window).scrollTop()};}else{f.fn.qtip.cache.screen.width=f(window).width();f.fn.qtip.cache.screen.height=f(window).height();}for(i=0;i<f.fn.qtip.interfaces.length;i++){var u=f.fn.qtip.interfaces[i];if(u.status.rendered===true&&(u.options.position.type!=="static"||u.options.position.adjust.scroll&&t.type==="scroll"||u.options.position.adjust.resize&&t.type==="resize")){u.updatePosition(t,true);}}},100);});f(document).bind("mousedown.qtip",function(t){if(f(t.target).parents("div.qtip").length===0){f(".qtip[unfocus]").each(function(){var u=f(this).qtip("api");if(f(this).is(":visible")&&!u.status.disabled&&f(t.target).add(u.elements.target).length>1){u.hide(t);}});}});});f.fn.qtip.interfaces=[];f.fn.qtip.log={error:function(){return this;}};f.fn.qtip.constants={};f.fn.qtip.defaults={content:{prerender:false,text:false,url:false,data:null,title:{text:false,button:false}},position:{target:false,corner:{target:"bottomRight",tooltip:"topLeft"},adjust:{x:0,y:0,mouse:true,screen:false,scroll:true,resize:true},type:"absolute",container:false},show:{when:{target:false,event:"mouseover"},effect:{type:"fade",length:100},delay:140,solo:false,ready:false},hide:{when:{target:false,event:"mouseout"},effect:{type:"fade",length:100},delay:0,fixed:false},api:{beforeRender:function(){},onRender:function(){},beforePositionUpdate:function(){},onPositionUpdate:function(){},beforeShow:function(){},onShow:function(){},beforeHide:function(){},onHide:function(){},beforeContentUpdate:function(){},onContentUpdate:function(){},beforeContentLoad:function(){},onContentLoad:function(){},beforeTitleUpdate:function(){},onTitleUpdate:function(){},beforeDestroy:function(){},onDestroy:function(){},beforeFocus:function(){},onFocus:function(){}}};f.fn.qtip.styles={defaults:{background:"white",color:"#111",overflow:"hidden",textAlign:"left",width:{min:0,max:250},padding:"5px 9px",border:{width:1,radius:0,color:"#d3d3d3"},tip:{corner:false,color:false,size:{width:13,height:13},opacity:1},title:{background:"#e1e1e1",fontWeight:"bold",padding:"7px 12px"},button:{cursor:"pointer"},classes:{target:"",tip:"qtip-tip",title:"qtip-title",button:"qtip-button",content:"qtip-content",active:"qtip-active"}},cream:{border:{width:3,radius:0,color:"#F9E98E"},title:{background:"#F0DE7D",color:"#A27D35"},background:"#FBF7AA",color:"#A27D35",classes:{tooltip:"qtip-cream"}},light:{border:{width:3,radius:0,color:"#E2E2E2"},title:{background:"#f1f1f1",color:"#454545"},background:"white",color:"#454545",classes:{tooltip:"qtip-light"}},dark:{border:{width:3,radius:0,color:"#303030"},title:{background:"#404040",color:"#f3f3f3"},background:"#505050",color:"#f3f3f3",classes:{tooltip:"qtip-dark"}},red:{border:{width:3,radius:0,color:"#CE6F6F"},title:{background:"#f28279",color:"#9C2F2F"},background:"#F79992",color:"#9C2F2F",classes:{tooltip:"qtip-red"}},green:{border:{width:3,radius:0,color:"#A9DB66"},title:{background:"#b9db8c",color:"#58792E"},background:"#CDE6AC",color:"#58792E",classes:{tooltip:"qtip-green"}},blue:{border:{width:3,radius:0,color:"#ADD9ED"},title:{background:"#D0E9F5",color:"#5E99BD"},background:"#E5F6FE",color:"#4D9FBF",classes:{tooltip:"qtip-blue"}}};})(ice.ace.jq);ice.ace.Tooltips={};ice.ace.Tooltip=function(a){var d=arguments.callee,e=a.id,c=d[e];if(c){c.jq.qtip("destroy");}this.cfg=a;this.target="";if(this.cfg.behaviors===undefined){this.cfg.behaviors={};}if(this.cfg.global){this.target="*[title]";}else{this.target=ice.ace.escapeClientId(this.cfg.forComponent);}this.cfg.style={};ice.ace.jq.extend(this.cfg.style,this.ThemeRoller);if(this.cfg.speechBubble){this.cfg.style.border={width:5,radius:10};this.cfg.style.tip=true;}this.jq=ice.ace.jq(this.target);if(this.jq.length<=0){return;}this.jq.qtip(this.cfg);var b=this;this.jq.qtip("api").beforeShow=function(){if(!ice.ace.Tooltips[b.target]&&(b.cfg.displayListener||b.cfg.behaviors.display)){ice.ace.Tooltips[b.target]=true;b.triggerDisplayListener();}};this.jq.qtip("api").onHide=function(){ice.ace.Tooltips[b.target]=false;};d[e]=this;};ice.ace.Tooltip.prototype.triggerDisplayListener=function(){var d=this.jq.parents("form:first").attr("id"),a={source:this.cfg.id,execute:this.cfg.id,formId:d,async:true};var c={};c[this.cfg.id+"_displayListener"]=true;a.params=c;var b=this.cfg&&this.cfg.behaviors&&this.cfg.behaviors.display;if(ice.ace.jq.isFunction(b)){b(a.params);}else{ice.ace.AjaxRequest(a);}};ice.ace.jq.fn.qtip.styles.defaults.background=undefined;ice.ace.jq.fn.qtip.styles.defaults.color=undefined;ice.ace.jq.fn.qtip.styles.defaults.tip.background=undefined;ice.ace.jq.fn.qtip.styles.defaults.title.background=undefined;ice.ace.jq.fn.qtip.styles.defaults.title.fontWeight=undefined;ice.ace.jq.fn.qtip.styles.defaults.width.max=Number.MAX_VALUE;ice.ace.Tooltip.prototype.ThemeRoller={border:{width:0,radius:0},classes:{tooltip:"ui-tooltip ui-widget",title:"ui-widget-header",content:"ui-tooltip-content ui-widget-content ui-corner-all"}};